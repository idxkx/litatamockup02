<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LITATA - è¡£æ©±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "SF Pro Text", -apple, "PingFang SC", "Helvetica Neue", Helvetica, Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            min-height: 100vh;
            width: 100vw;
            overflow-x: hidden;
            overflow-y: auto;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 20px 0;
        }

        /* å“åº”å¼å®¹å™¨ */
        .responsive-container {
            position: relative;
            width: 100%;
            max-width: 100vw;
            overflow-y: auto;
            display: flex;
            justify-content: center;
            height: auto;
        }

        /* iPhone 16 Pro Max è§†è§‰ä»¿çœŸå®¹å™¨ */
        .iphone-container {
            position: relative;
            width: 430px;
            height: 932px;
            background-color: #fff;
            border-radius: 55px;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            flex-shrink: 0;
        }

        /* é’ˆå¯¹å°å±å¹•çš„åª’ä½“æŸ¥è¯¢ */
        @media screen and (max-height: 960px) {
            .responsive-container {
                height: calc(100vh - 40px);
                overflow-y: scroll;
                padding-right: 5px;
                scrollbar-width: thin;
                scrollbar-color: rgba(0, 0, 0, 0.3) transparent;
            }
            
            .responsive-container::-webkit-scrollbar {
                width: 6px;
            }
            
            .responsive-container::-webkit-scrollbar-track {
                background: transparent;
            }
            
            .responsive-container::-webkit-scrollbar-thumb {
                background-color: rgba(0, 0, 0, 0.3);
                border-radius: 6px;
            }
            
            body {
                padding: 10px 0;
                align-items: flex-start;
            }
        }

        /* é¢å¤–çš„è¾…åŠ©å·¥å…· - åœ¨é¡µé¢åº•éƒ¨æ·»åŠ è¿”å›é¡¶éƒ¨æŒ‰é’® */
        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 9999;
        }

        .back-to-top.visible {
            opacity: 1;
        }

        /* åŠ¨æ€å²› */
        .dynamic-island {
            position: absolute;
            width: 125px;
            height: 35px;
            background: #000;
            border-radius: 20px;
            top: 12px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
        }

        /* çŠ¶æ€æ  */
        .status-bar {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50px;
            padding: 10px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 90;
        }

        .status-bar .time {
            font-weight: 600;
            font-size: 16px;
        }

        .status-bar .right {
            display: flex;
            gap: 5px;
        }

        .status-bar .right .icon {
            width: 18px;
            height: 18px;
        }

        /* ä¸»ä½“å†…å®¹åŒº */
        .app-container {
            height: 100%;
            width: 100%;
            padding-top: 60px;
            padding-bottom: 85px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* é¡¶éƒ¨å¯¼èˆª */
        .wardrobe-header {
            padding: 15px 20px;
            border-bottom: 1px solid #f2f2f2;
        }

        .header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .page-title {
            font-size: 24px;
            font-weight: 700;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
        }

        .action-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #f2f2f2;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
        }

        .scan-btn {
            background-color: #3a7bd5;
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .scan-btn svg {
            width: 18px;
            height: 18px;
            fill: #fff;
        }

        /* åˆ†ç±»é€‰é¡¹å¡ */
        .category-tabs {
            display: flex;
            overflow-x: auto;
            white-space: nowrap;
            scrollbar-width: none;
            -ms-overflow-style: none;
            margin: 0 -5px;
        }

        .category-tabs::-webkit-scrollbar {
            display: none;
        }

        .tab-item {
            padding: 8px 16px;
            font-size: 14px;
            color: #666;
            position: relative;
        }

        .tab-item.active {
            color: #3a7bd5;
            font-weight: 600;
        }

        .tab-item.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 3px;
            background-color: #3a7bd5;
            border-radius: 3px;
        }

        /* å†…å®¹åŒºåŸŸ */
        .wardrobe-content {
            flex: 1;
            overflow-y: auto;
            padding: 15px 20px;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .wardrobe-content::-webkit-scrollbar {
            display: none;
        }

        /* å¿«æ·ç­›é€‰æ  */
        .filter-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            white-space: nowrap;
            scrollbar-width: none;
            padding-bottom: 5px;
        }

        .filter-bar::-webkit-scrollbar {
            display: none;
        }

        .filter-chip {
            padding: 6px 12px;
            background-color: #f2f2f2;
            border-radius: 15px;
            font-size: 13px;
            color: #666;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .filter-chip.active {
            background-color: #3a7bd5;
            color: #fff;
        }

        /* æœç´¢æ  */
        .search-bar {
            display: flex;
            height: 40px;
            background-color: #f2f2f2;
            border-radius: 20px;
            padding: 0 15px;
            align-items: center;
            margin-bottom: 20px;
            gap: 10px;
        }

        .search-icon {
            color: #999;
            font-size: 16px;
        }

        .search-input {
            flex: 1;
            border: none;
            background: transparent;
            height: 100%;
            font-size: 14px;
            color: #333;
            outline: none;
        }

        /* å­åˆ†ç±»æ ‡é¢˜ */
        .subcategory-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .view-all {
            font-size: 13px;
            color: #3a7bd5;
            font-weight: normal;
            cursor: pointer;
            user-select: none;
        }

        /* æ‰‹é£ç´æ•ˆæœæ ·å¼ */
        .expanded-content {
            margin-top: 10px;
            border-top: 1px solid #f5f5f5;
            padding-top: 15px;
            overflow: hidden;
            display: none; /* é»˜è®¤éšè— */
        }
        
        .expanded-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 5px;
            padding-top: 5px;
            border-top: 1px dashed #f2f2f2;
        }
        
        /* å±•å¼€æ—¶çš„æ ·å¼å˜åŒ– */
        .subcategory.expanded .view-all {
            color: #ff7b4e;
            position: relative;
        }
        
        .subcategory.expanded .view-all::after {
            content: '';
            display: inline-block;
            width: 0;
            height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-bottom: 5px solid #ff7b4e;
            margin-left: 5px;
            transform: rotate(180deg);
            transition: transform 0.3s ease;
        }
        
        .subcategory:not(.expanded) .view-all::after {
            content: '';
            display: inline-block;
            width: 0;
            height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid #3a7bd5;
            margin-left: 5px;
            transition: transform 0.3s ease;
        }
        
        /* å±•å¼€/æ”¶èµ·æŒ‰é’®è¿‡æ¸¡æ•ˆæœ */
        .view-all {
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 3px;
            cursor: pointer;
            padding: 3px 8px;
            border-radius: 12px;
            background-color: rgba(0,0,0,0.03);
        }
        
        .view-all:hover {
            background-color: rgba(0,0,0,0.05);
        }
        
        /* å±•å¼€åŠ¨ç”» */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .expanded-content .clothes-item {
            animation: fadeIn 0.3s ease-out forwards;
        }
        
        /* é”™å¼€åŠ¨ç”»å»¶è¿Ÿ */
        .expanded-content .clothes-item:nth-child(2n) {
            animation-delay: 0.05s;
        }
        
        .expanded-content .clothes-item:nth-child(3n) {
            animation-delay: 0.1s;
        }
        
        .expanded-content .clothes-item:nth-child(4n) {
            animation-delay: 0.15s;
        }
        
        /* ç½‘æ ¼å¤§å°é€‚é… */
        .clothes-container.grid-small .expanded-grid,
        .expanded-grid.grid-small {
            grid-template-columns: repeat(3, 1fr);
        }
        
        .clothes-container.grid-medium .expanded-grid,
        .expanded-grid.grid-medium {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .clothes-container.grid-large .expanded-grid,
        .expanded-grid.grid-large {
            grid-template-columns: repeat(1, 1fr);
        }

        /* è¡£ç‰©ç½‘æ ¼ */
        .clothes-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        /* çŠ¶æ€æŒ‡ç¤ºå™¨æ ·å¼ */
        .item-badge {
            display: none; /* éšè—æ‰€æœ‰çŠ¶æ€æ ‡ç­¾ */
        }

        /* è¡£ç‰©é¡¹æ ·å¼ç»Ÿä¸€ */
        .clothes-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            background-color: #f9f9f9;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .clothes-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }

        .clothes-img {
            width: 100%;
            aspect-ratio: 1;
            object-fit: cover;
            display: block;
        }

        .item-name {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            padding: 0 3px 5px 3px;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* åº•éƒ¨å¯¼èˆªæ  */
        .bottom-nav {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 85px;
            background-color: #fff;
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-top: 1px solid #eee;
            padding-bottom: 20px;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .nav-icon {
            width: 28px;
            height: 28px;
            font-size: 24px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .nav-text {
            font-size: 12px;
            color: #666;
        }

        .nav-item.active .nav-icon {
            color: #3a7bd5;
            transform: scale(1.1);
        }

        .nav-item.active .nav-text {
            color: #3a7bd5;
            font-weight: 500;
        }

        /* åº•éƒ¨å®‰å…¨åŒºåŸŸ */
        .bottom-safe-area {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 20px;
            background-color: #fff;
            z-index: 10;
        }

        /* æ·»åŠ æŒ‰é’® */
        .add-item-btn {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 60px;
            height: 60px;
            background-color: #3a7bd5;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-size: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            z-index: 50;
        }

        /* è®¾ç½®æ¨¡æ€æ¡†å’Œèœå• */
        .settings-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 200;
            display: none;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .settings-modal.show {
            opacity: 1;
        }
        
        .settings-menu {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            max-height: 60%;
            background-color: #f2f2f6;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.1);
            z-index: 210;
            overflow: hidden;
            display: none;
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        
        .settings-menu.show {
            transform: translateY(0);
        }
        
        .settings-header {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #f2f2f6;
            position: sticky;
            top: 0;
            z-index: 5;
        }
        
        .settings-header:before {
            content: '';
            position: absolute;
            top: 0px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 4px;
            background-color: #d1d1d6;
            border-radius: 2px;
            margin-top: 5px;
        }
        
        .settings-header h3 {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
            color: #111;
        }
        
        .close-settings {
            background: none;
            border: none;
            font-size: 16px;
            color: #007aff;
            cursor: pointer;
            padding: 5px;
        }
        
        .settings-content {
            padding: 0;
            max-height: calc(60% - 50px);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .settings-item {
            margin-bottom: 10px;
            background-color: #fff;
        }
        
        .settings-item-title {
            font-size: 14px;
            font-weight: 600;
            padding: 8px 15px;
            margin: 0;
            color: #8E8E93;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            background-color: #f2f2f6;
        }
        
        .settings-item-options {
            display: flex;
            flex-direction: column;
        }
        
        .settings-option {
            padding: 12px 15px;
            color: #000;
            font-size: 15px;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            background-color: #fff;
        }
        
        .settings-option:last-child {
            border-bottom: none;
        }
        
        .settings-option:after {
            content: 'â€º';
            font-size: 20px;
            color: #bbb;
            font-weight: 300;
        }
        
        /* ç›¸æœºæ¨¡æ€æ¡† */
        .camera-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            z-index: 200;
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .camera-modal.show {
            opacity: 1;
        }
        
        .camera-header {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 5;
        }
        
        .camera-header h3 {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
            color: #fff;
        }
        
        .close-camera {
            background: none;
            border: none;
            font-size: 24px;
            color: #fff;
            cursor: pointer;
            padding: 5px;
        }
        
        .camera-viewfinder {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .camera-placeholder {
            text-align: center;
            color: #fff;
        }
        
        .camera-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
        
        #cameraView {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .camera-controls {
            position: absolute;
            bottom: 30px;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }
        
        #startCameraBtn {
            padding: 12px 25px;
            background-color: #fff;
            color: #000;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .camera-capture-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.8);
            border: 4px solid #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }
        
        .capture-icon {
            width: 30px;
            height: 30px;
            background-color: #fff;
            border-radius: 50%;
        }

        /* æ•´ç†æ æ ·å¼ */
        .organizer-bar-container {
            position: fixed;
            right: 0;
            top: 60px;
            height: calc(100% - 145px);
            width: 280px;
            z-index: 100;
            transition: transform 0.3s ease;
            transform: translateX(100%);
        }

        .organizer-bar-container.show {
            transform: translateX(0);
        }

        /* æ•´ç†æ å®¹å™¨ç‰¹å®šæ ·å¼ */
        .iphone-container .organizer-bar-container {
            position: absolute;
            right: 0;
            top: 60px;
            height: calc(100% - 145px);
            width: 280px;
            z-index: 50;
        }

        .organizer-bar-handle {
            width: 20px;
            height: 100%;
            background-color: #fff;
            border-top-left-radius: 15px;
            border-bottom-left-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: -2px 0 5px rgba(0, 0, 0, 0.1);
            position: absolute;
            left: -20px;
        }

        .organizer-bar-handle:before {
            content: '';
            height: 40px;
            width: 4px;
            background-color: #ccc;
            border-radius: 2px;
        }

        .organizer-bar {
            background-color: #fff;
            padding: 15px;
            box-shadow: -2px 0 5px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 10px;
            height: 100%;
            overflow: hidden;
        }

        .organizer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .organizer-title {
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .organizer-count {
            background-color: #3a7bd5;
            color: #fff;
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 10px;
        }

        .organizer-actions {
            display: flex;
            gap: 10px;
        }

        .organizer-clear {
            font-size: 13px;
            color: #ff6b6b;
            background: none;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .organizer-clear:hover {
            background-color: rgba(255, 107, 107, 0.1);
        }

        .organizer-minimize {
            font-size: 13px;
            color: #666;
            background: none;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 15px;
        }

        .organizer-minimize:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .organizer-items {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            padding: 5px 0;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: rgba(0, 0, 0, 0.3) transparent;
        }

        .organizer-items::-webkit-scrollbar {
            width: 4px;
        }

        .organizer-items::-webkit-scrollbar-track {
            background: transparent;
        }

        .organizer-items::-webkit-scrollbar-thumb {
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }

        .organizer-item {
            position: relative;
            width: 100%;
            aspect-ratio: 1;
            flex-shrink: 0;
            background-color: #f9f9f9;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .guide-button {
            background-color: #3a7bd5;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            margin-top: 10px;
            cursor: pointer;
        }

        .organizer-item-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .organizer-item-remove {
            position: absolute;
            top: 2px;
            right: 2px;
            width: 18px;
            height: 18px;
            background-color: rgba(255, 0, 0, 0.7);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 10px;
            cursor: pointer;
        }

        .organizer-placeholder {
            width: 100%;
            height: 100%;
            min-height: 150px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: #999;
            font-size: 12px;
            text-align: center;
            padding: 10px;
            grid-column: span 3;
        }

        .organizer-placeholder-icon {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .organizer-batch-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            padding: 10px 0;
            border-top: 1px solid #f0f0f0;
        }

        .batch-action {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            padding: 10px;
            cursor: pointer;
            border-radius: 8px;
            background-color: #f9f9f9;
        }

        .batch-action:hover {
            background-color: #f0f0f0;
        }

        .batch-action-icon {
            font-size: 20px;
            width: 35px;
            height: 35px;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: white;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .batch-action-text {
            font-size: 12px;
            color: #666;
        }

        /* æ•´ç†æ æŒ‡ç¤ºå™¨ */
        .organizer-indicator {
            position: fixed;
            top: 70px;
            right: 20px;
            background-color: #3a7bd5;
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 99;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .organizer-indicator.show {
            opacity: 1;
        }

        /* æ‹–åŠ¨ç›¸å…³æ ·å¼ */
        .clothes-item.dragging {
            opacity: 0.5;
            transform: scale(0.95);
        }

        .drag-preview {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .drag-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .clothes-item.draggable {
            cursor: grab;
        }

        .clothes-item.draggable:active {
            cursor: grabbing;
        }

        /* æ‹–æ‹½æç¤º */
        .drop-zone-hint {
            position: absolute;
            right: 290px;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            pointer-events: none;
            z-index: 200;
            opacity: 0;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .drop-zone-hint.show {
            opacity: 1;
            transform: translateY(-50%) translateX(-10px);
        }

        /* ç¡®è®¤å¯¹è¯æ¡† */
        .confirm-dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            padding: 20px;
            z-index: 1000;
            width: 85%;
            max-width: 350px;
            display: none;
        }

        .confirm-dialog.show {
            display: block;
            animation: dialog-show 0.3s ease forwards;
        }

        @keyframes dialog-show {
            from { opacity: 0; transform: translate(-50%, -40%); }
            to { opacity: 1; transform: translate(-50%, -50%); }
        }

        .confirm-dialog-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
            text-align: center;
        }

        .confirm-dialog-message {
            font-size: 14px;
            color: #666;
            margin-bottom: 20px;
            text-align: center;
        }

        .confirm-dialog-buttons {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        .confirm-dialog-button {
            flex: 1;
            padding: 10px;
            border-radius: 10px;
            border: none;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
        }

        .confirm-button-cancel {
            background-color: #f2f2f2;
            color: #666;
        }

        .confirm-button-confirm {
            background-color: #3a7bd5;
            color: white;
        }

        .confirm-dialog-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            backdrop-filter: blur(3px);
            display: none;
        }

        .confirm-dialog-backdrop.show {
            display: block;
        }

        /* è¡£ç‰©é¡¹é€‰æ‹©çŠ¶æ€ */
        .clothes-item.selected {
            position: relative;
            border: 2px solid #3a7bd5;
        }

        .clothes-item.selected:after {
            content: 'âœ“';
            position: absolute;
            top: 5px;
            right: 5px;
            width: 20px;
            height: 20px;
            background-color: #3a7bd5;
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 12px;
        }

        /* é€‰æ‹©æ¨¡å¼æç¤º */
        .selection-mode-indicator {
            position: fixed;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            z-index: 200;
            display: none;
        }

        .selection-mode-indicator.show {
            display: block;
            animation: selection-indicator-show 0.3s ease forwards;
        }

        @keyframes selection-indicator-show {
            from { opacity: 0; transform: translateX(-50%) translateY(-10px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }

        /* èœå•è¦†ç›–å±‚ */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 990;
            display: none;
        }

        .overlay.show {
            display: block;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        /* é¦–æ¬¡ä½¿ç”¨å¼•å¯¼ */
        .guide-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(3px);
        }

        .guide-overlay.show {
            display: flex;
        }

        .guide-content {
            background-color: white;
            padding: 25px;
            border-radius: 15px;
            max-width: 85%;
            width: 350px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .guide-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .guide-description {
            font-size: 14px;
            color: #666;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .guide-image {
            margin: 15px 0;
            width: 100%;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .guide-button {
            background-color: #3a7bd5;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            margin-top: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="responsive-container">
        <div class="iphone-container">
            <!-- åŠ¨æ€å²› -->
            <div class="dynamic-island"></div>
            
            <!-- çŠ¶æ€æ  -->
            <div class="status-bar">
                <div class="time">10:30</div>
                <div class="right">
                    <div class="icon">ğŸ“¶</div>
                    <div class="icon">ğŸ“¡</div>
                    <div class="icon">ğŸ”‹</div>
                </div>
            </div>

            <!-- åº”ç”¨ä¸»å†…å®¹ -->
            <div class="app-container">
                <!-- é¡¶éƒ¨å¯¼èˆª -->
                <div class="wardrobe-header">
                    <div class="header-row">
                        <h1 class="page-title">è¡£æ©±</h1>
                        <div class="action-buttons">
                            <button class="action-btn scan-btn" id="scanBtn">
                                ğŸ“·
                            </button>
                            <button class="action-btn settings-icon" id="settingsBtn">
                                âš™ï¸
                            </button>
                        </div>
                    </div>
                    
                    <!-- åˆ†ç±»é€‰é¡¹å¡ -->
                    <div class="category-tabs">
                        <div class="tab-item active">å…¨éƒ¨</div>
                        <div class="tab-item">ä¸Šè£…</div>
                        <div class="tab-item">ä¸‹è£…</div>
                        <div class="tab-item">è¿ä½“æœé¥°</div>
                        <div class="tab-item">é‹é´</div>
                        <div class="tab-item">é…é¥°</div>
                        <div class="tab-item">åŠŸèƒ½æœé¥°</div>
                        <div class="tab-item">ç‰¹æ®Šåœºæ™¯</div>
                    </div>
                </div>
                
                <!-- å†…å®¹åŒºåŸŸ -->
                <div class="wardrobe-content">
                    <!-- å¿«æ·ç­›é€‰æ  -->
                    <div class="filter-bar">
                        <div class="filter-chip active">å…¨éƒ¨å­£èŠ‚</div>
                        <div class="filter-chip">æ˜¥å­£</div>
                        <div class="filter-chip">å¤å­£</div>
                        <div class="filter-chip">ç§‹å­£</div>
                        <div class="filter-chip">å†¬å­£</div>
                        <div class="filter-chip">åœºæ™¯ç­›é€‰</div>
                        <div class="filter-chip">æ¸…æ´çŠ¶æ€</div>
                    </div>
                    
                    <!-- æœç´¢æ  -->
                    <div class="search-bar">
                        <div class="search-icon">ğŸ”</div>
                        <input type="text" placeholder="æœç´¢è¡£ç‰©" class="search-input">
                    </div>
                    
                    <!-- ä¸Šè£…-åŸºç¡€æ¬¾ -->
                    <div class="subcategory">
                        <div class="subcategory-title">
                            ä¸Šè£… - åŸºç¡€æ¬¾
                            <span class="view-all">æŸ¥çœ‹å…¨éƒ¨ ></span>
                        </div>
                        
                        <div class="clothes-grid clothes-container">
                            <div class="clothes-item">
                                <img src="https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?q=80&w=380&auto=format&fit=crop" alt="Tæ¤è¡«" class="clothes-img">
                                <div class="item-badge unworn">æœªç©¿ç€</div>
                                <div class="item-name">Tæ¤è¡«</div>
                            </div>
                            <div class="clothes-item">
                                <img src="https://images.unsplash.com/photo-1542272604-787c3835535d?q=80&w=387&auto=format&fit=crop" alt="ç‰›ä»”è£¤" class="clothes-img">
                                <div class="item-badge">å·²ç©¿ç€</div>
                                <div class="item-name">ç‰›ä»”è£¤</div>
                            </div>
                            <div class="clothes-item">
                                <img src="https://images.unsplash.com/photo-1596755094514-f87e34085b2c?q=80&w=388&auto=format&fit=crop" alt="è¡¬è¡«" class="clothes-img">
                                <div class="item-badge">å·²ç©¿ç€</div>
                                <div class="item-name">è¡¬è¡«</div>
                            </div>
                            <div class="clothes-item">
                                <img src="https://images.unsplash.com/photo-1550639525-c97d455acf70?q=80&w=387&auto=format&fit=crop" alt="è¿è¡£è£™" class="clothes-img">
                                <div class="item-badge">å·²ç©¿ç€</div>
                                <div class="item-name">è¿è¡£è£™</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä¸Šè£…-å¤–å¥— -->
                    <div class="subcategory">
                        <div class="subcategory-title">
                            ä¸Šè£… - å¤–å¥—
                            <span class="view-all">æŸ¥çœ‹å…¨éƒ¨ ></span>
                        </div>
                        
                        <div class="clothes-grid">
                            <div class="clothes-item">
                                <img src="https://images.unsplash.com/photo-1611312449408-fcece27cdbb7?q=80&w=369&auto=format&fit=crop" class="clothes-img" alt="ç‰›ä»”å¤–å¥—">
                                <div class="item-name">æ·±è“è‰²ç‰›ä»”å¤–å¥—</div>
                            </div>
                            
                            <div class="clothes-item">
                                <img src="https://images.unsplash.com/photo-1591047139829-d91aecb6caea?q=80&w=436&auto=format&fit=crop" class="clothes-img" alt="è¥¿è£…å¤–å¥—">
                                <div class="item-badge">å·²ç©¿ç€</div>
                                <div class="item-name">ç°è‰²è¥¿è£…å¤–å¥—</div>
                            </div>
                            
                            <div class="clothes-item">
                                <img src="https://images.unsplash.com/photo-1543076447-215ad9ba6923?q=80&w=1374&auto=format&fit=crop" class="clothes-img" alt="é»‘è‰²çš®å¤¹å…‹">
                                <div class="item-name">é»‘è‰²çš®å¤¹å…‹</div>
                            </div>
                            
                            <div class="clothes-item">
                                <img src="https://images.unsplash.com/photo-1584865288642-42078afe6942?q=80&w=387&auto=format&fit=crop" class="clothes-img" alt="æ ¼å­å¤§è¡£">
                                <div class="item-badge idle">é—²ç½®</div>
                                <div class="item-name">é©¼è‰²æ ¼å­å¤§è¡£</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä¸‹è£…-è£¤è£… -->
                    <div class="subcategory">
                        <div class="subcategory-title">
                            ä¸‹è£… - è£¤è£…
                            <span class="view-all">æŸ¥çœ‹å…¨éƒ¨ ></span>
                        </div>
                        
                        <div class="clothes-grid">
                            <div class="clothes-item">
                                <img src="https://images.unsplash.com/photo-1541099649105-f69ad21f3246?q=80&w=387&auto=format&fit=crop" class="clothes-img" alt="ç‰›ä»”è£¤">
                                <div class="item-badge">å·²ç©¿ç€</div>
                                <div class="item-name">è“è‰²ç›´ç­’ç‰›ä»”è£¤</div>
                            </div>
                            
                            <div class="clothes-item">
                                <img src="https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?q=80&w=387&auto=format&fit=crop" class="clothes-img" alt="ä¼‘é—²è£¤">
                                <div class="item-name">ç±³è‰²ä¼‘é—²è£¤</div>
                            </div>
                            
                            <div class="clothes-item">
                                <img src="https://images.unsplash.com/photo-1473966968600-fa801b869a1a?q=80&w=387&auto=format&fit=crop" class="clothes-img" alt="è¿åŠ¨è£¤">
                                <div class="item-name">é»‘è‰²è¿åŠ¨è£¤</div>
                            </div>
                            
                            <div class="clothes-item">
                                <img src="https://images.unsplash.com/photo-1584865288642-42078afe6942?q=80&w=387&auto=format&fit=crop" class="clothes-img" alt="è¥¿è£…è£¤">
                                <div class="item-name">ç°è‰²è¥¿è£…è£¤</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- æ·»åŠ è¡£ç‰©æŒ‰é’® -->
                <div class="add-item-btn">+</div>
                
                <!-- åº•éƒ¨å¯¼èˆªæ  -->
                <div class="bottom-nav">
                    <div class="nav-item">
                        <div class="nav-icon">ğŸ </div>
                        <div class="nav-text">é¦–é¡µ</div>
                    </div>
                    <div class="nav-item">
                        <div class="nav-icon">âœ¨</div>
                        <div class="nav-text">ç©¿æ­</div>
                    </div>
                    <div class="nav-item active">
                        <div class="nav-icon">ğŸ‘š</div>
                        <div class="nav-text">è¡£æ©±</div>
                    </div>
                    <div class="nav-item">
                        <div class="nav-icon">ğŸ‘¤</div>
                        <div class="nav-text">æˆ‘çš„</div>
                    </div>
                </div>
                
                <!-- æ•´ç†æ  -->
                <div class="organizer-bar-container" id="organizerContainer">
                    <div class="organizer-bar-handle" id="organizerHandle"></div>
                    <div class="organizer-bar">
                        <div class="organizer-header">
                            <div class="organizer-title">
                                æ•´ç†æ  <span class="organizer-count" id="organizerCount">0</span>
                            </div>
                            <div class="organizer-actions">
                                <button class="organizer-clear" id="organizerClear">æ¸…ç©º</button>
                                <button class="organizer-minimize" id="organizerMinimize">æ”¶èµ·</button>
                            </div>
                        </div>
                        <div class="organizer-items" id="organizerItems">
                            <div class="organizer-placeholder" id="organizerPlaceholder">
                                <div class="organizer-placeholder-icon">ğŸ“¥</div>
                                <div>å°†è¡£ç‰©æ‹–æ‹½è‡³æ­¤è¿›è¡Œæ‰¹é‡æ“ä½œ</div>
                            </div>
                        </div>
                        <div class="organizer-batch-actions">
                            <div class="batch-action" id="batchOutfit">
                                <div class="batch-action-icon">ğŸ‘”</div>
                                <div class="batch-action-text">åˆ›å»ºç©¿æ­</div>
                            </div>
                            <div class="batch-action" id="batchMove">
                                <div class="batch-action-icon">ğŸ“‚</div>
                                <div class="batch-action-text">ç§»åŠ¨åˆ†ç±»</div>
                            </div>
                            <div class="batch-action" id="batchHide">
                                <div class="batch-action-icon">ğŸ‘ï¸</div>
                                <div class="batch-action-text">éšè—æ¨è</div>
                            </div>
                            <div class="batch-action" id="batchDelete">
                                <div class="batch-action-icon">ğŸ—‘ï¸</div>
                                <div class="batch-action-text">åˆ é™¤</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ•´ç†æ æç¤ºå™¨ -->
                <div class="organizer-indicator" id="organizerIndicator">
                    <span>æ‰“å¼€æ•´ç†æ </span>
                    <span class="organizer-count" id="indicatorCount">0</span>
                </div>

                <!-- æ‹–æ‹½æç¤º -->
                <div class="drop-zone-hint" id="dropZoneHint">å°†è¡£ç‰©æ‹–æ‹½åˆ°æ•´ç†æ </div>
                
                <!-- åº•éƒ¨å®‰å…¨åŒºåŸŸ -->
                <div class="bottom-safe-area"></div>
            </div>
        </div>
    </div>

    <!-- é€‰æ‹©æ¨¡å¼æç¤º -->
    <div class="selection-mode-indicator" id="selectionModeIndicator">
        <span>å¤šé€‰æ¨¡å¼å·²å¼€å¯ï¼Œç‚¹å‡»è¡£ç‰©é€‰æ‹©</span>
    </div>

    <!-- ç¡®è®¤å¯¹è¯æ¡† -->
    <div class="confirm-dialog" id="confirmDialog">
        <div class="confirm-dialog-title" id="confirmTitle">ç¡®è®¤æ“ä½œ</div>
        <div class="confirm-dialog-message" id="confirmMessage">æ‚¨ç¡®å®šè¦æ‰§è¡Œæ­¤æ“ä½œå—ï¼Ÿ</div>
        <div class="confirm-dialog-buttons">
            <button class="confirm-dialog-button confirm-button-cancel" id="confirmCancel">å–æ¶ˆ</button>
            <button class="confirm-dialog-button confirm-button-confirm" id="confirmOk">ç¡®å®š</button>
        </div>
    </div>
    <div class="confirm-dialog-backdrop" id="confirmBackdrop"></div>

    <!-- èœå•è¦†ç›–å±‚ -->
    <div class="overlay" id="overlay"></div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <div class="back-to-top" id="back-to-top">â†‘</div>

    <!-- è®¾ç½®æ¨¡æ€æ¡†å’Œèœå• -->
    <div class="settings-modal">
        <div class="settings-menu">
            <div class="settings-header">
                <div></div>
                <h3>è®¾ç½®</h3>
                <button class="close-settings">âœ•</button>
            </div>
            <div class="settings-content">
                <div class="settings-item">
                    <div class="settings-item-title">å¤–è§‚</div>
                    <div class="settings-item-options">
                        <div class="settings-option" data-setting="grid-size">
                            <span>ç½‘æ ¼å¤§å°</span>
                        </div>
                        <div class="settings-option" data-setting="theme">
                            <span>ä¸»é¢˜</span>
                        </div>
                    </div>
                </div>
                <div class="settings-item">
                    <div class="settings-item-title">ç®¡ç†</div>
                    <div class="settings-item-options">
                        <div class="settings-option" data-setting="categories">
                            <span>åˆ†ç±»ç®¡ç†</span>
                        </div>
                        <div class="settings-option" data-setting="tags">
                            <span>æ ‡ç­¾ç®¡ç†</span>
                        </div>
                    </div>
                </div>
                <div class="settings-item">
                    <div class="settings-item-title">æ•°æ®</div>
                    <div class="settings-item-options">
                        <div class="settings-option" data-setting="backup">
                            <span>å¤‡ä»½æ•°æ®</span>
                        </div>
                        <div class="settings-option" data-setting="import">
                            <span>å¯¼å…¥æ•°æ®</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ç›¸æœºæ¨¡æ€æ¡† -->
    <div class="camera-modal">
        <div class="camera-header">
            <button class="close-camera">âœ•</button>
            <h3>æ‹ç…§æœç´¢</h3>
            <div></div>
        </div>
        <div class="camera-viewfinder">
            <div class="camera-placeholder">
                <div class="camera-icon">ğŸ“·</div>
                <p>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å¯ç›¸æœº</p>
            </div>
            <video id="cameraView" autoplay playsinline style="display: none;"></video>
        </div>
        <div class="camera-controls">
            <button class="camera-btn" id="startCameraBtn">å¼€å¯ç›¸æœº</button>
            <button class="camera-capture-btn" id="captureBtn" style="display: none;">
                <div class="capture-icon"></div>
            </button>
        </div>
    </div>

    <!-- é¦–æ¬¡ä½¿ç”¨å¼•å¯¼ -->
    <div class="guide-overlay" id="organizerGuide">
        <div class="guide-content">
            <div class="guide-title">æ•´ç†æ æ–°åŠŸèƒ½</div>
            <div class="guide-description">
                æ•´ç†æ ç°åœ¨ä½äºå³ä¾§ï¼Œå¯ä»¥å¸®åŠ©æ‚¨æ‰¹é‡ç®¡ç†è¡£ç‰©ï¼Œæœ‰ä¸¤ç§æ–¹å¼æ·»åŠ è¡£ç‰©åˆ°æ•´ç†æ ï¼š
            </div>
            <div style="display: flex; margin: 15px 0; gap: 10px; justify-content: center;">
                <div style="text-align: center; flex: 1;">
                    <div style="width: 60px; height: 60px; border-radius: 50%; background-color: #f0f0f0; display: flex; justify-content: center; align-items: center; margin: 0 auto; font-size: 24px;">ğŸ‘†</div>
                    <div style="font-size: 13px; margin-top: 5px; color: #666;">é•¿æŒ‰è¡£ç‰©è¿›å…¥å¤šé€‰æ¨¡å¼</div>
                </div>
                <div style="text-align: center; flex: 1;">
                    <div style="width: 60px; height: 60px; border-radius: 50%; background-color: #f0f0f0; display: flex; justify-content: center; align-items: center; margin: 0 auto; font-size: 24px;">âœ‹</div>
                    <div style="font-size: 13px; margin-top: 5px; color: #666;">æ‹–æ‹½è¡£ç‰©åˆ°å³ä¾§æ•´ç†æ </div>
                </div>
            </div>
            <div class="guide-description">
                æ•´ç†æ ä¸­çš„è¡£ç‰©å¯ä»¥è¿›è¡Œæ‰¹é‡æ“ä½œï¼Œå¦‚åˆ›å»ºç©¿æ­ã€ç§»åŠ¨åˆ†ç±»ã€éšè—æ¨èå’Œåˆ é™¤ã€‚
            </div>
            <button class="guide-button" id="guideCloseButton">äº†è§£äº†</button>
        </div>
    </div>

    <script>
        // æ‰§è¡Œé¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('é¡µé¢å·²åŠ è½½å®Œæˆ');
            
            // é¦–å…ˆåˆå§‹åŒ–è¡£ç‰©çš„æ•°æ®å±æ€§
            initClothesItemsAttributes();
            
            // å¤„ç†å¯¼èˆªæ ç‚¹å‡»
            setupNavigation();
            
            // åˆå§‹åŒ–åˆ†ç±»æ»‘å—
            initCategorySlider();
            
            // è®¾ç½®ç­›é€‰æ 
            initFilterBar();
            
            // åˆå§‹åŒ–"æŸ¥çœ‹å…¨éƒ¨"æŒ‰é’®
            initViewAllButtons();
            
            // åˆå§‹åŒ–è¡£ç‰©æ‚¬åœæ•ˆæœ
            initClothesItemHover();
            
            // åˆå§‹åŒ–è¡£ç‰©ç‚¹å‡»äº‹ä»¶
            initClothesItemClick();
            
            // æ·»åŠ è®¾ç½®æŒ‰é’®ç‚¹å‡»å¤„ç†
            document.querySelector('#settingsBtn').addEventListener('click', handleSettingsClick);
            
            // æ·»åŠ æ‰«ææŒ‰é’®ç‚¹å‡»å¤„ç†
            document.querySelector('#scanBtn').addEventListener('click', handleScanClick);
            
            // å…³é—­è®¾ç½®èœå•æŒ‰é’®
            document.querySelector('.close-settings').addEventListener('click', closeSettingsMenu);
            
            // å…³é—­ç›¸æœºæ¨¡æ€æ¡†æŒ‰é’®
            document.querySelector('.close-camera').addEventListener('click', closeCameraModal);
            
            // å¼€å¯ç›¸æœºæŒ‰é’®
            document.querySelector('#startCameraBtn').addEventListener('click', startCamera);
            
            // æ‹ç…§æŒ‰é’®
            document.querySelector('#captureBtn').addEventListener('click', capturePhoto);
            
            // åˆå§‹åŒ–è®¾ç½®åŠŸèƒ½
            initializeSettingsFeatures();
            
            // åˆå§‹åŒ–æ·»åŠ æŒ‰é’®
            document.querySelector('.add-item-btn').addEventListener('click', function() {
                showToast('æ·»åŠ è¡£ç‰©åŠŸèƒ½å°šæœªå®ç°');
            });
            
            // åˆå§‹åŒ–æ‹–æ”¾åŠŸèƒ½
            initDragAndDrop();
            
            // åˆå§‹åŒ–æ•´ç†æ 
            initOrganizerBar();
            
            // åˆå§‹åŒ–æ‰¹é‡æ“ä½œåŠŸèƒ½
            initBatchActions();
            
            // åˆå§‹åŒ–ç¡®è®¤å¯¹è¯æ¡†
            initConfirmDialog();
            
            // åˆå§‹åŒ–å¼•å¯¼
            initGuide();
            
            // åˆå§‹åŒ–è¿”å›é¡¶éƒ¨åŠŸèƒ½
            initBackToTop();
        });
        
        // æ‰«ææŒ‰é’®ç‚¹å‡»å¤„ç†å‡½æ•°
        function handleScanClick() {
            showToast('æ‰“å¼€ç›¸æœºæ‰«æ');
            
            // æ˜¾ç¤ºç›¸æœºæ¨¡æ€æ¡†
            const cameraModal = document.querySelector('.camera-modal');
            if (cameraModal) {
                cameraModal.style.display = 'block';
                // è§¦å‘é‡ç»˜ä»¥å¯ç”¨è¿‡æ¸¡æ•ˆæœ
                void cameraModal.offsetWidth;
                cameraModal.classList.add('show');
            }
            
            // æ·»åŠ iOSé£æ ¼è§¦æ„Ÿåé¦ˆ
            if (window.navigator && window.navigator.vibrate) {
                window.navigator.vibrate(5);
            }
        }
        
        // å…³é—­ç›¸æœºæ¨¡æ€æ¡†
        function closeCameraModal() {
            const cameraModal = document.querySelector('.camera-modal');
            if (cameraModal) {
                cameraModal.classList.remove('show');
                
                // ç­‰å¾…è¿‡æ¸¡æ•ˆæœå®Œæˆåéšè—å…ƒç´ 
                setTimeout(() => {
                    cameraModal.style.display = 'none';
                    
                    // åœæ­¢ç›¸æœº
                    stopCamera();
                }, 300);
            }
        }
        
        // å¼€å¯ç›¸æœº
        function startCamera() {
            const cameraView = document.getElementById('cameraView');
            const startBtn = document.getElementById('startCameraBtn');
            const captureBtn = document.getElementById('captureBtn');
            const placeholder = document.querySelector('.camera-placeholder');
            
            // æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒgetUserMedia
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })
                    .then(function(stream) {
                        // æ˜¾ç¤ºè§†é¢‘æµ
                        cameraView.srcObject = stream;
                        cameraView.style.display = 'block';
                        
                        // éšè—å¼€å§‹æŒ‰é’®ï¼Œæ˜¾ç¤ºæ‹ç…§æŒ‰é’®
                        startBtn.style.display = 'none';
                        captureBtn.style.display = 'block';
                        
                        // éšè—å ä½ç¬¦
                        placeholder.style.display = 'none';
                        
                        showToast('ç›¸æœºå·²å¼€å¯');
                    })
                    .catch(function(error) {
                        console.error('ç›¸æœºå¼€å¯å¤±è´¥:', error);
                        showToast('æ— æ³•å¼€å¯ç›¸æœº: ' + error.message);
                    });
            } else {
                showToast('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒç›¸æœºåŠŸèƒ½');
            }
        }
        
        // åœæ­¢ç›¸æœº
        function stopCamera() {
            const cameraView = document.getElementById('cameraView');
            const startBtn = document.getElementById('startCameraBtn');
            const captureBtn = document.getElementById('captureBtn');
            const placeholder = document.querySelector('.camera-placeholder');
            
            // åœæ­¢è§†é¢‘æµ
            if (cameraView.srcObject) {
                const tracks = cameraView.srcObject.getTracks();
                tracks.forEach(track => track.stop());
                cameraView.srcObject = null;
            }
            
            // é‡ç½®UI
            cameraView.style.display = 'none';
            startBtn.style.display = 'block';
            captureBtn.style.display = 'none';
            placeholder.style.display = 'block';
        }
        
        // æ‹ç…§å¹¶è¯†åˆ«
        function capturePhoto() {
            const cameraView = document.getElementById('cameraView');
            
            // åˆ›å»ºç”»å¸ƒæ•è·è§†é¢‘å½“å‰å¸§
            const canvas = document.createElement('canvas');
            canvas.width = cameraView.videoWidth;
            canvas.height = cameraView.videoHeight;
            
            const context = canvas.getContext('2d');
            context.drawImage(cameraView, 0, 0, canvas.width, canvas.height);
            
            // è·å–å›¾ç‰‡æ•°æ®
            const imageData = canvas.toDataURL('image/jpeg');
            
            // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥å‘é€å›¾ç‰‡åˆ°æœåŠ¡å™¨æˆ–æœ¬åœ°AIå¤„ç†
            // æ¨¡æ‹Ÿè¯†åˆ«è¿‡ç¨‹
            showToast('æ­£åœ¨è¯†åˆ«å›¾ç‰‡...');
            
            // å…³é—­ç›¸æœºæ¨¡æ€æ¡†
            closeCameraModal();
            
            // æ¨¡æ‹Ÿä¸€ä¸ªå»¶æ—¶ï¼Œå‡è£…åœ¨è¯†åˆ«
            setTimeout(() => {
                // éšæœºé€‰æ‹©ä¸€ä¸ªè¯†åˆ«ç»“æœ
                const results = [
                    'ç‰›ä»”è£¤',
                    'Tæ¤',
                    'è¿è¡£è£™',
                    'çš®å¤¹å…‹'
                ];
                const result = results[Math.floor(Math.random() * results.length)];
                
                showToast(`è¯†åˆ«ç»“æœ: ${result}ï¼Œæ­£åœ¨æœç´¢ç›¸ä¼¼è¡£ç‰©...`);
                
                // æ¨¡æ‹Ÿæœç´¢è¿‡ç¨‹
                setTimeout(() => {
                    showToast(`å·²æ‰¾åˆ°5ä»¶ç›¸ä¼¼çš„${result}`);
                    
                    // è¿™é‡Œå¯ä»¥å®ç°æœç´¢ç»“æœå±•ç¤ºé€»è¾‘
                }, 1000);
            }, 1500);
        }

        // ç½‘æ ¼å¤§å°è°ƒæ•´åŠŸèƒ½å˜é‡ä¸è®¾ç½®
        let gridSizeOptions = [
            { name: 'å°', value: 'small', columns: 3 },
            { name: 'ä¸­', value: 'medium', columns: 2 },
            { name: 'å¤§', value: 'large', columns: 1 }
        ];
        let currentGridSize = localStorage.getItem('wardrobeGridSize') || 'medium';
        
        // å…¨å±€å˜é‡ï¼Œç”¨äºè®°å½•å½“å‰ç­›é€‰çŠ¶æ€
        let currentCategory = 'å…¨éƒ¨';
        let currentSeason = 'å…¨éƒ¨å­£èŠ‚';
        let currentScene = 'æ—¥å¸¸';
        
        // åˆå§‹åŒ–è®¾ç½®é¡¹
        function initializeSettingsFeatures() {
            // é¦–å…ˆåˆå§‹åŒ–åŸæœ‰çš„è®¾ç½®èœå•å…³é—­åŠŸèƒ½
            initializeSettingsMenu();
            
            // ç„¶ååˆå§‹åŒ–å„ä¸ªè®¾ç½®åŠŸèƒ½
            initializeGridSizeSettings();
        }
        
        // åˆå§‹åŒ–ç½‘æ ¼å¤§å°è®¾ç½®
        function initializeGridSizeSettings() {
            // æ‰¾åˆ°ç½‘æ ¼å¤§å°è®¾ç½®é€‰é¡¹
            const gridSizeOption = document.querySelector('.settings-option');
            
            if (gridSizeOption) {
                gridSizeOption.addEventListener('click', function() {
                    showGridSizeMenu();
                });
                
                // åº”ç”¨ä¿å­˜çš„ç½‘æ ¼å¤§å°è®¾ç½®
                applyGridSizeSettings(currentGridSize);
            }
        }
        
        // æ˜¾ç¤ºç½‘æ ¼å¤§å°è®¾ç½®èœå•
        function showGridSizeMenu() {
            // å…³é—­å½“å‰çš„è®¾ç½®èœå•
            const settingsModal = document.querySelector('.settings-modal');
            const settingsMenu = document.querySelector('.settings-menu');
            settingsMenu.classList.remove('show');
            
            // åˆ›å»ºç½‘æ ¼å¤§å°è®¾ç½®å­èœå•
            const gridSizeSubMenu = document.createElement('div');
            gridSizeSubMenu.className = 'settings-submenu';
            gridSizeSubMenu.innerHTML = `
                <div class="settings-header">
                    <div class="back-button">
                        <span>â†</span>
                    </div>
                    <h3>ç½‘æ ¼å¤§å°</h3>
                    <div></div>
                </div>
                <div class="settings-content">
                    <div class="settings-item">
                        <div class="settings-item-options">
                            ${gridSizeOptions.map(option => `
                                <div class="settings-option grid-size-option" data-size="${option.value}">
                                    <div class="option-left">
                                        <span class="grid-preview grid-${option.value}"></span>
                                        <span>${option.name}</span>
                                    </div>
                                    <span class="option-check ${currentGridSize === option.value ? 'checked' : ''}">âœ“</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
            
            settingsModal.appendChild(gridSizeSubMenu);
            
            // æ˜¾ç¤ºå­èœå•
            setTimeout(() => {
                gridSizeSubMenu.classList.add('show');
                
                // æ·»åŠ è¿”å›æŒ‰é’®äº‹ä»¶
                const backButton = gridSizeSubMenu.querySelector('.back-button');
                backButton.addEventListener('click', function() {
                    hideSubmenu(gridSizeSubMenu);
                });
                
                // æ·»åŠ ç½‘æ ¼å¤§å°é€‰é¡¹ç‚¹å‡»äº‹ä»¶
                const gridOptions = gridSizeSubMenu.querySelectorAll('.grid-size-option');
                gridOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        const size = this.getAttribute('data-size');
                        // æ›´æ–°é€‰ä¸­çŠ¶æ€
                        gridSizeSubMenu.querySelectorAll('.option-check').forEach(check => {
                            check.classList.remove('checked');
                        });
                        this.querySelector('.option-check').classList.add('checked');
                        
                        // ä¿å­˜è®¾ç½®
                        localStorage.setItem('wardrobeGridSize', size);
                        currentGridSize = size;
                        
                        // åº”ç”¨è®¾ç½®
                        applyGridSizeSettings(size);
                        
                        // æ˜¾ç¤ºæˆåŠŸæç¤º
                        showToast('ç½‘æ ¼å¤§å°å·²æ›´æ–°');
                        
                        // å»¶è¿Ÿå…³é—­å­èœå•
                        setTimeout(() => {
                            hideSubmenu(gridSizeSubMenu);
                        }, 500);
                    });
                });
            }, 50);
        }
        
        // éšè—å­èœå•
        function hideSubmenu(submenu) {
            submenu.classList.remove('show');
            
            // æ˜¾ç¤ºä¸»è®¾ç½®èœå•
            const settingsMenu = document.querySelector('.settings-menu');
            settingsMenu.classList.add('show');
            
            // ç§»é™¤å­èœå•
            setTimeout(() => {
                if (submenu.parentNode) {
                    submenu.parentNode.removeChild(submenu);
                }
            }, 300);
        }
        
        // åº”ç”¨ç½‘æ ¼å¤§å°è®¾ç½®
        function applyGridSizeSettings(size) {
            const clothesContainer = document.querySelector('.clothes-grid');
            
            if (clothesContainer) {
                // ç§»é™¤ç°æœ‰çš„ç½‘æ ¼ç±»
                clothesContainer.classList.remove('grid-small', 'grid-medium', 'grid-large');
                
                // æ·»åŠ æ–°çš„ç½‘æ ¼ç±»
                clothesContainer.classList.add(`grid-${size}`);
                
                // é‡æ–°æ’åˆ—è¡£ç‰©å¸ƒå±€
                adjustClothesLayout();
            }
        }
        
        // è°ƒæ•´è¡£ç‰©å¸ƒå±€
        function adjustClothesLayout() {
            const clothesItems = document.querySelectorAll('.clothes-item');
            
            // æ ¹æ®å½“å‰ç½‘æ ¼å¤§å°è®¾ç½®ï¼Œè°ƒæ•´è¡£ç‰©æ˜¾ç¤º
            const selectedOption = gridSizeOptions.find(option => option.value === currentGridSize);
            if (selectedOption) {
                clothesItems.forEach(item => {
                    item.style.width = `calc(${100/selectedOption.columns}% - 10px)`;
                });
            }
        }
        
        // è®¾ç½®æŒ‰é’®ç‚¹å‡»å¤„ç†å‡½æ•°
        function handleSettingsClick() {
            showToast('æ‰“å¼€è®¾ç½®èœå•');
            console.log('è®¾ç½®æŒ‰é’®è¢«ç‚¹å‡»');
            
            // æ˜¾ç¤ºè®¾ç½®èœå•
            const settingsModal = document.querySelector('.settings-modal');
            const settingsMenu = document.querySelector('.settings-menu');
            
            if (settingsModal && settingsMenu) {
                // é¦–å…ˆæ˜¾ç¤ºæ¨¡æ€èƒŒæ™¯
                settingsModal.style.display = 'block';
                // è§¦å‘é‡ç»˜ä»¥å¯ç”¨è¿‡æ¸¡æ•ˆæœ
                void settingsModal.offsetWidth;
                settingsModal.classList.add('show');
                
                // ç„¶åæ˜¾ç¤ºè®¾ç½®èœå•ï¼ˆä»åº•éƒ¨æ»‘å…¥ï¼‰
                settingsMenu.style.display = 'block';
                // è§¦å‘é‡ç»˜ä»¥å¯ç”¨è¿‡æ¸¡æ•ˆæœ
                void settingsMenu.offsetWidth;
                settingsMenu.classList.add('show');
            }
            
            // æ·»åŠ iOSé£æ ¼è§¦æ„Ÿåé¦ˆ
            if (window.navigator && window.navigator.vibrate) {
                window.navigator.vibrate(5);
            }
        }
        
        // åˆå§‹åŒ–è®¾ç½®èœå•å…³é—­æŒ‰é’®
        function initializeSettingsMenu() {
            const closeSettingsBtn = document.querySelector('.close-settings');
            const settingsModal = document.querySelector('.settings-modal');
            const settingsMenu = document.querySelector('.settings-menu');
            
            if (closeSettingsBtn && settingsModal) {
                closeSettingsBtn.addEventListener('click', closeSettingsMenu);
                
                // ç‚¹å‡»æ¨¡æ€èƒŒæ™¯å…³é—­è®¾ç½®
                settingsModal.addEventListener('click', function(e) {
                    if (e.target === settingsModal) {
                        closeSettingsMenu();
                    }
                });
                
                // æ·»åŠ æ‰‹åŠ¿æ»‘åŠ¨å…³é—­åŠŸèƒ½
                if (settingsMenu) {
                    let startY = 0;
                    let currentY = 0;
                    
                    settingsMenu.addEventListener('touchstart', function(e) {
                        startY = e.touches[0].clientY;
                    });
                    
                    settingsMenu.addEventListener('touchmove', function(e) {
                        currentY = e.touches[0].clientY;
                        const diffY = currentY - startY;
                        
                        // åªå…è®¸å‘ä¸‹æ»‘åŠ¨å…³é—­
                        if (diffY > 0) {
                            this.style.transform = `translateY(${diffY}px)`;
                            e.preventDefault(); // é˜²æ­¢é¡µé¢æ»šåŠ¨
                        }
                    });
                    
                    settingsMenu.addEventListener('touchend', function() {
                        const diffY = currentY - startY;
                        if (diffY > 70) { // å¦‚æœä¸‹æ»‘è¶…è¿‡70pxåˆ™å…³é—­
                            closeSettingsMenu();
                        } else {
                            // å¦åˆ™æ¢å¤åŸä½
                            this.style.transform = '';
                            this.classList.add('show');
                        }
                    });
                }
                
                // è®¾ç½®é€‰é¡¹ç‚¹å‡»æ•ˆæœ
                const settingsOptions = document.querySelectorAll('.settings-option');
                settingsOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        const optionText = this.textContent.trim();
                        showToast(`æ‚¨é€‰æ‹©äº†: ${optionText}`);
                        
                        // æ·»åŠ ç‚¹å‡»åé¦ˆ
                        this.style.backgroundColor = 'rgba(0,0,0,0.05)';
                        setTimeout(() => {
                            this.style.backgroundColor = '';
                        }, 200);
                        
                        // æ·»åŠ iOSé£æ ¼è§¦æ„Ÿåé¦ˆ
                        if (window.navigator && window.navigator.vibrate) {
                            window.navigator.vibrate(3);
                        }
                    });
                });
            }
        }
        
        // å…³é—­è®¾ç½®èœå•å‡½æ•°
        function closeSettingsMenu() {
            const settingsModal = document.querySelector('.settings-modal');
            const settingsMenu = document.querySelector('.settings-menu');
            
            if (settingsModal && settingsMenu) {
                // å…ˆç§»é™¤showç±»ä»¥è§¦å‘è¿‡æ¸¡æ•ˆæœ
                settingsModal.classList.remove('show');
                settingsMenu.classList.remove('show');
                
                // é‡ç½®å¯èƒ½å­˜åœ¨çš„å†…è”æ ·å¼
                settingsMenu.style.transform = 'translateY(100%)';
                
                // ç­‰å¾…è¿‡æ¸¡æ•ˆæœå®Œæˆåéšè—å…ƒç´ 
                setTimeout(() => {
                    settingsModal.style.display = 'none';
                    settingsMenu.style.display = 'none';
                    // æ¢å¤é»˜è®¤çŠ¶æ€
                    settingsMenu.style.transform = '';
                }, 400); // ç•¥é•¿äºCSSè¿‡æ¸¡æ—¶é—´
            }
        }
        
        // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
        function showToast(message) {
            // æ£€æŸ¥æ˜¯å¦å·²æœ‰toastï¼Œå¦‚æœæœ‰åˆ™ç§»é™¤
            const existingToast = document.querySelector('.toast-message');
            if (existingToast) {
                document.body.removeChild(existingToast);
            }
            
            // åˆ›å»ºæ–°çš„toastå…ƒç´ 
            const toast = document.createElement('div');
            toast.className = 'toast-message';
            toast.textContent = message;
            
            // æ·»åŠ toastæ ·å¼
            toast.style.position = 'fixed';
            toast.style.bottom = '100px';
            toast.style.left = '50%';
            toast.style.transform = 'translateX(-50%)';
            toast.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
            toast.style.color = 'white';
            toast.style.padding = '10px 20px';
            toast.style.borderRadius = '20px';
            toast.style.zIndex = '1000';
            toast.style.opacity = '0';
            toast.style.transition = 'opacity 0.3s ease';
            
            // å°†toastæ·»åŠ åˆ°é¡µé¢ä¸­
            document.body.appendChild(toast);
            
            // è§¦å‘é‡ç»˜ä»¥å¯ç”¨è¿‡æ¸¡æ•ˆæœ
            void toast.offsetWidth;
            toast.style.opacity = '1';
            
            // è®¾ç½®è‡ªåŠ¨æ¶ˆå¤±çš„å®šæ—¶å™¨
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => {
                    if (toast.parentNode) {
                        document.body.removeChild(toast);
                    }
                }, 300);
            }, 2000);
        }
        
        // å¯¼èˆªåŠŸèƒ½
        function setupNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach((item, index) => {
                item.addEventListener('click', function() {
                    // ç§»é™¤å…¶ä»–é¡¹ç›®çš„activeç±»
                    navItems.forEach(navItem => navItem.classList.remove('active'));
                    // ç»™å½“å‰é¡¹ç›®æ·»åŠ activeç±»
                    this.classList.add('active');
                    
                    // å¯¼èˆªåˆ°ç›¸åº”é¡µé¢
                    switch(index) {
                        case 0:
                            // é¦–é¡µ
                            showToast('å¯¼èˆªåˆ°é¦–é¡µ');
                            window.location.href = 'index.html';
                            break;
                        case 1:
                            // è¡£æ©±
                            showToast('å¯¼èˆªåˆ°è¡£æ©±');
                            window.location.href = 'wardrobe.html';
                            break;
                        case 2:
                            // ç©¿æ­
                            showToast('å¯¼èˆªåˆ°ç©¿æ­');
                            window.location.href = 'outfit.html';
                            break;
                        case 3:
                            // æˆ‘çš„
                            showToast('å¯¼èˆªåˆ°æˆ‘çš„');
                            window.location.href = 'profile.html';
                            break;
                    }
                });
            });
        }

        // åˆå§‹åŒ–åˆ†ç±»æ»‘å—
        function initCategorySlider() {
            const tabs = document.querySelectorAll('.category-tabs .tab-item');
            console.log(`æ‰¾åˆ° ${tabs.length} ä¸ªåˆ†ç±»æ ‡ç­¾ï¼Œæ–‡æœ¬å†…å®¹:`, Array.from(tabs).map(t => t.textContent.trim()));
            
            tabs.forEach((tab, index) => {
                tab.addEventListener('click', function() {
                    // ç§»é™¤å…¶ä»–æ ‡ç­¾çš„activeç±»
                    tabs.forEach(t => t.classList.remove('active'));
                    // ç»™å½“å‰æ ‡ç­¾æ·»åŠ activeç±»
                    this.classList.add('active');
                    
                    const category = this.textContent.trim();
                    console.log(`ç‚¹å‡»åˆ†ç±»æ ‡ç­¾: "${category}", ç´¢å¼•: ${index}`);
                    showToast(`å·²åˆ‡æ¢åˆ°${category}åˆ†ç±»`);
                    
                    // ç­›é€‰ç›¸å…³è¡£ç‰©å’Œå­åˆ†ç±»
                    filterByCategory(category);
                });
            });
        }
        
        // åˆå§‹åŒ–è¡£ç‰©æ•°æ®å±æ€§
        function initClothesItemsAttributes() {
            console.log('æ­£åœ¨åˆå§‹åŒ–è¡£ç‰©æ•°æ®å±æ€§');
            
            // è·å–æ‰€æœ‰å­åˆ†ç±»
            const subcategories = document.querySelectorAll('.subcategory');
            console.log(`æ‰¾åˆ° ${subcategories.length} ä¸ªå­åˆ†ç±»`);
            
            // éå†æ‰€æœ‰å­åˆ†ç±»ï¼Œä¸ºè¡£ç‰©è®¾ç½®å±æ€§
            subcategories.forEach((subcat, index) => {
                const titleEl = subcat.querySelector('.subcategory-title');
                if (!titleEl) {
                    console.log(`å­åˆ†ç±» ${index} æ²¡æœ‰æ ‡é¢˜å…ƒç´ `);
                    return;
                }
                
                // ç›´æ¥è·å–å­åˆ†ç±»æ ‡é¢˜æ–‡æœ¬ï¼Œä¾‹å¦‚"ä¸Šè£… - åŸºç¡€æ¬¾"
                const titleText = titleEl.textContent.trim().split('>')[0].trim();
                console.log(`å¤„ç†å­åˆ†ç±»: "${titleText}"`);
                
                // æå–ä¸»è¦åˆ†ç±»ï¼Œä¾‹å¦‚"ä¸Šè£…" å’Œå­åˆ†ç±» "åŸºç¡€æ¬¾"
                const parts = titleText.split('-').map(part => part.trim());
                if (parts.length < 2) {
                    console.log(`å­åˆ†ç±»æ ‡é¢˜ "${titleText}" æ ¼å¼ä¸ç¬¦åˆ"åˆ†ç±»-ç±»å‹"æ ¼å¼`);
                    return;
                }
                
                const mainCategory = parts[0]; // ä¾‹å¦‚"ä¸Šè£…"
                const subcategoryType = parts[1]; // ä¾‹å¦‚"åŸºç¡€æ¬¾"
                
                console.log(`æå–åˆ†ç±»: ä¸»åˆ†ç±»="${mainCategory}", å­åˆ†ç±»="${subcategoryType}"`);
                
                // è·å–è¯¥å­åˆ†ç±»ä¸‹æ‰€æœ‰è¡£ç‰©
                const items = subcat.querySelectorAll('.clothes-item');
                console.log(`å­åˆ†ç±» "${titleText}" ä¸‹æœ‰ ${items.length} ä»¶è¡£ç‰©`);
                
                // ä¸ºæ¯ä»¶è¡£ç‰©è®¾ç½®æ•°æ®å±æ€§
                items.forEach(item => {
                    const nameEl = item.querySelector('.item-name');
                    const name = nameEl ? nameEl.textContent.trim() : 'æœªå‘½å';
                    
                    // è®¾ç½®ä¸»åˆ†ç±»å’Œå­åˆ†ç±»
                    item.setAttribute('data-category', mainCategory);
                    item.setAttribute('data-subcategory', subcategoryType);
                    
                    // æ ¹æ®åç§°è®¾ç½®å­£èŠ‚
                    let seasons = [];
                    if (name.includes('æ˜¥') || name.toLowerCase().includes('spring')) seasons.push('æ˜¥å­£');
                    if (name.includes('å¤') || name.toLowerCase().includes('summer')) seasons.push('å¤å­£');
                    if (name.includes('ç§‹') || name.toLowerCase().includes('fall') || name.toLowerCase().includes('autumn')) seasons.push('ç§‹å­£');
                    if (name.includes('å†¬') || name.toLowerCase().includes('winter')) seasons.push('å†¬å­£');
                    
                    // å¦‚æœæ²¡æœ‰æ˜ç¡®çš„å­£èŠ‚ï¼Œæ ¹æ®è¡£ç‰©ç±»å‹æ¨æ–­
                    if (seasons.length === 0) {
                        if (name.includes('Tæ¤') || name.includes('çŸ­è¢–') || name.includes('çŸ­è£¤')) {
                            seasons.push('å¤å­£');
                        } else if (name.includes('æ¯›è¡£') || name.includes('å¤§è¡£') || name.includes('ç¾½ç»’')) {
                            seasons.push('å†¬å­£');
                        } else if (name.includes('é£è¡£') || name.includes('å¤¹å…‹')) {
                            seasons.push('æ˜¥å­£', 'ç§‹å­£');
                        } else {
                            seasons.push('æ˜¥å­£', 'å¤å­£', 'ç§‹å­£', 'å†¬å­£'); // é»˜è®¤å…¨å­£èŠ‚
                        }
                    }
                    
                    item.setAttribute('data-season', seasons.join(','));
                    
                    // æ ¹æ®åç§°è®¾ç½®åœºæ™¯
                    let scenes = [];
                    if (name.includes('ä¼‘é—²') || name.includes('æ—¥å¸¸')) scenes.push('æ—¥å¸¸', 'ä¼‘é—²');
                    if (name.includes('æ­£è£…') || name.includes('è¥¿è£…') || name.includes('è¥¿æœ')) scenes.push('æ­£å¼', 'èŒåœº');
                    if (name.includes('è¿åŠ¨')) scenes.push('è¿åŠ¨');
                    if (name.includes('æ´¾å¯¹') || name.includes('çº¦ä¼š')) scenes.push('çº¦ä¼š');
                    
                    // å¦‚æœæ²¡æœ‰æ˜ç¡®çš„åœºæ™¯ï¼Œæ ¹æ®è¡£ç‰©ç±»å‹æ¨æ–­
                    if (scenes.length === 0) {
                        if (subcategoryType.includes('åŸºç¡€') || name.includes('Tæ¤')) {
                            scenes.push('æ—¥å¸¸', 'ä¼‘é—²');
                        } else if (name.includes('å¤–å¥—') || name.includes('è¥¿è£…')) {
                            scenes.push('èŒåœº', 'æ­£å¼');
                        } else {
                            scenes.push('æ—¥å¸¸'); // é»˜è®¤æ—¥å¸¸åœºæ™¯
                        }
                    }
                    
                    item.setAttribute('data-scene', scenes.join(','));
                    
                    console.log(`è¡£ç‰© "${name}" - åˆ†ç±»:${mainCategory}, å­åˆ†ç±»:${subcategoryType}, å­£èŠ‚:${seasons.join(',')}, åœºæ™¯:${scenes.join(',')}`);
                });
            });
            
            // è°ƒè¯•è¾“å‡ºï¼šç»Ÿè®¡å„ä¸ªåˆ†ç±»çš„è¡£ç‰©æ•°é‡
            setTimeout(() => {
                const allItems = document.querySelectorAll('.clothes-item');
                const categoryCounts = {};
                
                allItems.forEach(item => {
                    const cat = item.getAttribute('data-category');
                    categoryCounts[cat] = (categoryCounts[cat] || 0) + 1;
                });
                
                console.log('åˆ†ç±»ç»Ÿè®¡:', categoryCounts);
                
                // ç‰¹åˆ«æ£€æŸ¥"ä¸Šè£…"åˆ†ç±»
                const topsItems = Array.from(allItems).filter(item => 
                    item.getAttribute('data-category') === 'ä¸Šè£…');
                console.log(`"ä¸Šè£…"åˆ†ç±»å…±æœ‰ ${topsItems.length} ä»¶è¡£ç‰©:`, 
                    topsItems.map(item => item.querySelector('.item-name')?.textContent || 'æœªå‘½å'));
            }, 100);
            
            console.log('è¡£ç‰©æ•°æ®å±æ€§åˆå§‹åŒ–å®Œæˆ');
        }
        
        // ç»„åˆç­›é€‰ï¼ˆåŒæ—¶è€ƒè™‘åˆ†ç±»ã€å­£èŠ‚å’Œåœºæ™¯ï¼‰
        function applyFilters() {
            console.log(`åº”ç”¨ç­›é€‰ - åˆ†ç±»:"${currentCategory}", å­£èŠ‚:"${currentSeason}", åœºæ™¯:"${currentScene}"`);
            
            const clothesItems = document.querySelectorAll('.clothes-item');
            console.log(`æ‰¾åˆ° ${clothesItems.length} ä¸ªè¡£ç‰©é¡¹`);
            
            // æ›´çµæ´»çš„åˆ†ç±»åŒ¹é…å‡½æ•°
            function categoryMatches(itemCategory, selectedCategory) {
                if (selectedCategory === 'å…¨éƒ¨') return true;
                if (!itemCategory) return false;
                
                // ç²¾ç¡®åŒ¹é…
                if (itemCategory === selectedCategory) return true;
                
                // éƒ¨åˆ†åŒ¹é…ï¼ˆå¤„ç†å¯èƒ½çš„ç©ºæ ¼æˆ–å…¶ä»–å·®å¼‚ï¼‰
                const normalizedItem = itemCategory.replace(/\s+/g, '');
                const normalizedSelected = selectedCategory.replace(/\s+/g, '');
                
                return normalizedItem === normalizedSelected;
            }
            
            // æ ¹æ®å½“å‰é€‰ä¸­çš„åˆ†ç±»ã€å­£èŠ‚å’Œåœºæ™¯è¿›è¡Œç­›é€‰
            let visibleCount = 0;
            clothesItems.forEach(item => {
                const itemCategory = item.getAttribute('data-category');
                const itemSeasons = item.getAttribute('data-season') || '';
                const itemScenes = item.getAttribute('data-scene') || '';
                const name = item.querySelector('.item-name')?.textContent || 'æœªå‘½å';
                
                const matchesCategory = categoryMatches(itemCategory, currentCategory);
                const matchesSeason = currentSeason === 'å…¨éƒ¨å­£èŠ‚' || itemSeasons.includes(currentSeason);
                const matchesScene = !currentScene || currentScene === 'æ—¥å¸¸' || itemScenes.includes(currentScene);
                
                // è¾“å‡ºç­›é€‰è¯¦æƒ…
                if (!matchesCategory) {
                    console.log(`è¡£ç‰© "${name}" åˆ†ç±»ä¸åŒ¹é… - è¡£ç‰©:"${itemCategory}", é€‰ä¸­:"${currentCategory}"`);
                }
                
                if (matchesCategory && matchesSeason && matchesScene) {
                    item.style.display = '';
                    visibleCount++;
                    console.log(`æ˜¾ç¤ºè¡£ç‰©: "${name}", åˆ†ç±»="${itemCategory}"`);
                } else {
                    item.style.display = 'none';
                }
            });
            
            console.log(`ç­›é€‰ç»“æœ: æ˜¾ç¤º ${visibleCount}/${clothesItems.length} ä¸ªè¡£ç‰©`);
            
            // å¤„ç†å­åˆ†ç±»çš„æ˜¾ç¤º/éšè—
            const subcategories = document.querySelectorAll('.subcategory');
            subcategories.forEach(subcat => {
                const titleEl = subcat.querySelector('.subcategory-title');
                if (!titleEl) return;
                
                const titleText = titleEl.textContent.trim().split('>')[0].trim();
                const parts = titleText.split('-').map(part => part.trim());
                if (parts.length < 2) return;
                
                const subcatCategory = parts[0]; // ä¾‹å¦‚"ä¸Šè£…"
                
                // æ£€æŸ¥æ˜¯å¦æœ‰å¯è§çš„è¡£ç‰©
                const visibleItems = Array.from(subcat.querySelectorAll('.clothes-item')).filter(
                    item => item.style.display !== 'none'
                );
                
                const hasVisibleItems = visibleItems.length > 0;
                
                // æ›´çµæ´»çš„å­åˆ†ç±»åŒ¹é…
                const matchesCategory = categoryMatches(subcatCategory, currentCategory);
                
                if ((currentCategory === 'å…¨éƒ¨' || matchesCategory) && hasVisibleItems) {
                    subcat.style.display = '';
                    console.log(`æ˜¾ç¤ºå­åˆ†ç±»: "${titleText}", åˆ†ç±»="${subcatCategory}", åŒ¹é…=${matchesCategory}`);
                } else {
                    subcat.style.display = 'none';
                    console.log(`éšè—å­åˆ†ç±»: "${titleText}", åˆ†ç±»="${subcatCategory}", åŒ¹é…=${matchesCategory}, æœ‰å¯è§è¡£ç‰©=${hasVisibleItems}`);
                }
            });
            
            // å¤„ç†æ²¡æœ‰ç»“æœçš„æƒ…å†µ
            if (visibleCount === 0) {
                console.log('ç­›é€‰ç»“æœä¸ºç©ºï¼Œæ²¡æœ‰åŒ¹é…çš„è¡£ç‰©');
                showToast('æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„è¡£ç‰©');
            }
        }
        
        // æŒ‰åˆ†ç±»ç­›é€‰è¡£ç‰©
        function filterByCategory(category) {
            console.log(`æ‰§è¡Œåˆ†ç±»ç­›é€‰: "${category}"`);
            
            // æ›´æ–°å½“å‰é€‰ä¸­çš„åˆ†ç±»
            currentCategory = category;
            
            // è°ƒç”¨ç»„åˆç­›é€‰
            applyFilters();
        }
        
        // æŒ‰å­£èŠ‚ç­›é€‰è¡£ç‰©
        function filterBySeason(season) {
            // æ›´æ–°å½“å‰é€‰ä¸­çš„å­£èŠ‚
            currentSeason = season;
            
            // è°ƒç”¨ç»„åˆç­›é€‰
            applyFilters();
        }
        
        // æŒ‰åœºæ™¯ç­›é€‰è¡£ç‰©
        function filterByScene(scene) {
            // æ›´æ–°å½“å‰é€‰ä¸­çš„åœºæ™¯
            currentScene = scene;
            
            // è°ƒç”¨ç»„åˆç­›é€‰
            applyFilters();
        }

        // åˆå§‹åŒ–æ¨¡æ‹Ÿæ•°æ®
        function initializeWardrobeData() {
            // è¿™é‡Œå¯ä»¥æ·»åŠ æ¨¡æ‹Ÿæ•°æ®çš„åˆå§‹åŒ–é€»è¾‘
        }

        // æ•´ç†æ ç›¸å…³åŠŸèƒ½
        function initializeOrganizerBar() {
            // è¿™ä¸ªæ˜¯æ—§çš„ç©ºå‡½æ•°ï¼Œä¿æŒä¸ºç©ºå³å¯
        }

        // æ‹–æ‹½åŠŸèƒ½
        function makeItemsDraggable() {
            // è¿™ä¸ªæ˜¯æ—§çš„ç©ºå‡½æ•°ï¼Œä¿æŒä¸ºç©ºå³å¯
        }

        // åˆå§‹åŒ–ç­›é€‰æ 
        function initFilterBar() {
            const filterChips = document.querySelectorAll('.filter-chip');
            let currentFilter = 'å…¨éƒ¨å­£èŠ‚';
            
            // æ·»åŠ æ–°çš„åœºæ™¯ç­›é€‰é€‰é¡¹
            const filterBar = document.querySelector('.filter-bar');
            if (filterBar) {
                // ç§»é™¤ç°æœ‰çš„"åœºæ™¯ç­›é€‰"é€‰é¡¹
                const sceneFilter = Array.from(filterChips).find(chip => chip.textContent.trim() === 'åœºæ™¯ç­›é€‰');
                if (sceneFilter) {
                    sceneFilter.remove();
                }
                
                // æ·»åŠ å…·ä½“çš„åœºæ™¯ç­›é€‰é€‰é¡¹
                const sceneFilters = ['æ—¥å¸¸', 'èŒåœº', 'çº¦ä¼š', 'è¿åŠ¨', 'æ­£å¼', 'ä¼‘é—²'];
                sceneFilters.forEach(scene => {
                    const sceneChip = document.createElement('div');
                    sceneChip.className = 'filter-chip';
                    sceneChip.textContent = scene;
                    sceneChip.setAttribute('data-filter-type', 'scene');
                    filterBar.appendChild(sceneChip);
                });
            }
            
            // ä¸ºæ‰€æœ‰ç­›é€‰é€‰é¡¹æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼ˆåŒ…æ‹¬æ–°æ·»åŠ çš„ï¼‰
            const allFilterChips = document.querySelectorAll('.filter-chip');
            allFilterChips.forEach(chip => {
                chip.addEventListener('click', function() {
                    const filterType = this.getAttribute('data-filter-type') || 'season';
                    const filter = this.textContent.trim();
                    
                    // åªç§»é™¤åŒç±»ç­›é€‰é¡¹çš„activeç±»
                    allFilterChips.forEach(c => {
                        if ((c.getAttribute('data-filter-type') || 'season') === filterType) {
                            c.classList.remove('active');
                        }
                    });
                    
                    // ç»™å½“å‰ç­›é€‰é¡¹æ·»åŠ activeç±»
                    this.classList.add('active');
                    
                    showToast(`${filterType === 'scene' ? 'åœºæ™¯' : 'å­£èŠ‚'}ç­›é€‰: ${filter}`);
                    
                    // æ ¹æ®ç­›é€‰ç±»å‹è°ƒç”¨ä¸åŒçš„ç­›é€‰å‡½æ•°
                    if (filterType === 'scene') {
                        filterByScene(filter);
                    } else {
                        filterBySeason(filter);
                    }
                });
            });
            
            // æ ‡è®°å­£èŠ‚ç­›é€‰é€‰é¡¹
            const seasonFilters = ['å…¨éƒ¨å­£èŠ‚', 'æ˜¥å­£', 'å¤å­£', 'ç§‹å­£', 'å†¬å­£'];
            allFilterChips.forEach(chip => {
                const text = chip.textContent.trim();
                if (seasonFilters.includes(text)) {
                    chip.setAttribute('data-filter-type', 'season');
                }
            });
        }

        // åˆå§‹åŒ–æŸ¥çœ‹å…¨éƒ¨åŠŸèƒ½
        function initViewAllButtons() {
            console.log("å¼€å§‹åˆå§‹åŒ–æŸ¥çœ‹å…¨éƒ¨æŒ‰é’®");
            
            // æ¸…é™¤ä¹‹å‰å¯èƒ½å­˜åœ¨çš„äº‹ä»¶ç›‘å¬å™¨
            document.querySelectorAll('.expanded-content').forEach(item => {
                if(item.parentNode) {
                    item.parentNode.removeChild(item);
                }
            });
            
            // è·å–æ‰€æœ‰æŸ¥çœ‹å…¨éƒ¨æŒ‰é’®å¹¶æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
            const viewAllButtons = document.querySelectorAll('.view-all');
            console.log(`æ‰¾åˆ° ${viewAllButtons.length} ä¸ªæŸ¥çœ‹å…¨éƒ¨æŒ‰é’®`);
            
            viewAllButtons.forEach(button => {
                // ç§»é™¤å¯èƒ½å­˜åœ¨çš„æ—§äº‹ä»¶ç›‘å¬å™¨
                const newButton = button.cloneNode(true);
                if (button.parentNode) {
                    button.parentNode.replaceChild(newButton, button);
                }
                
                // æ·»åŠ æ–°çš„äº‹ä»¶ç›‘å¬å™¨
                newButton.addEventListener('click', function(e) {
                    console.log('æŸ¥çœ‹å…¨éƒ¨æŒ‰é’®è¢«ç‚¹å‡»');
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // è·å–åŒ…å«æ­¤æŒ‰é’®çš„å­åˆ†ç±»å®¹å™¨
                    const subcategory = this.closest('.subcategory');
                    if (!subcategory) {
                        console.error('æ‰¾ä¸åˆ°çˆ¶çº§å­åˆ†ç±»å®¹å™¨');
                        return;
                    }
                    
                    // è·å–å­åˆ†ç±»æ ‡é¢˜
                    const titleEl = subcategory.querySelector('.subcategory-title');
                    const subcategoryTitle = titleEl ? titleEl.textContent.split('æŸ¥çœ‹å…¨éƒ¨')[0].trim() : 'æœªçŸ¥å­åˆ†ç±»';
                    
                    // æ£€æŸ¥å½“å‰æ˜¯å¦å·²ç»å±•å¼€
                    const isExpanded = subcategory.classList.contains('expanded');
                    console.log(`å½“å‰çŠ¶æ€: ${isExpanded ? 'å·²å±•å¼€' : 'æœªå±•å¼€'}, å­åˆ†ç±»: ${subcategoryTitle}`);
                    
                    if (isExpanded) {
                        // æ”¶èµ·å†…å®¹
                        console.log('æ‰§è¡Œæ”¶èµ·æ“ä½œ');
                        this.textContent = 'æŸ¥çœ‹å…¨éƒ¨ >';
                        this.style.color = '';
                        subcategory.classList.remove('expanded');
                        
                        // éšè—æ‰©å±•å†…å®¹
                        const expandedContent = subcategory.querySelector('.expanded-content');
                        if (expandedContent) {
                            expandedContent.style.display = 'none';
                        }
                        
                        showToast(`å·²æ”¶èµ·${subcategoryTitle}`);
                    } else {
                        // å±•å¼€å†…å®¹
                        console.log('æ‰§è¡Œå±•å¼€æ“ä½œ');
                        this.textContent = 'æ”¶èµ·';
                        this.style.color = '#ff7b4e';
                        subcategory.classList.add('expanded');
                        
                        // è·å–æˆ–åˆ›å»ºæ‰©å±•å†…å®¹
                        let expandedContent = subcategory.querySelector('.expanded-content');
                        
                        if (!expandedContent) {
                            console.log('åˆ›å»ºæ–°çš„æ‰©å±•å†…å®¹');
                            expandedContent = document.createElement('div');
                            expandedContent.className = 'expanded-content';
                            expandedContent.style.display = 'block';
                            
                            // æ ¹æ®åˆ†ç±»è·å–å¯¹åº”çš„è¡£ç‰©åˆ—è¡¨
                            const clothesItems = generateItemsForCategory(subcategoryTitle);
                            
                            // æ·»åŠ ç½‘æ ¼å®¹å™¨
                            const grid = document.createElement('div');
                            grid.className = 'expanded-grid';
                            
                            // å‘ç½‘æ ¼ä¸­æ·»åŠ è¡£ç‰©
                            clothesItems.forEach(item => {
                                const clothesItem = document.createElement('div');
                                clothesItem.className = 'clothes-item';
                                clothesItem.innerHTML = `
                                    <img src="${item.img}" class="clothes-img" alt="${item.name}">
                                    <div class="item-name">${item.name}</div>
                                `;
                                
                                // è®¾ç½®æ•°æ®å±æ€§ï¼Œä¸ç­›é€‰é€»è¾‘ä¿æŒä¸€è‡´
                                if (subcategoryTitle.includes('ä¸Šè£…')) {
                                    clothesItem.setAttribute('data-category', 'ä¸Šè£…');
                                } else if (subcategoryTitle.includes('ä¸‹è£…')) {
                                    clothesItem.setAttribute('data-category', 'ä¸‹è£…');
                                }
                                clothesItem.setAttribute('data-season', 'æ˜¥å­£,å¤å­£,ç§‹å­£,å†¬å­£');
                                clothesItem.setAttribute('data-scene', 'æ—¥å¸¸');
                                
                                // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                                clothesItem.addEventListener('click', function() {
                                    showToast(`æŸ¥çœ‹è¡£ç‰©: ${item.name}`);
                                });
                                
                                grid.appendChild(clothesItem);
                            });
                            
                            // å°†ç½‘æ ¼æ·»åŠ åˆ°æ‰©å±•å†…å®¹
                            expandedContent.appendChild(grid);
                            
                            // å°†æ‰©å±•å†…å®¹æ·»åŠ åˆ°å­åˆ†ç±»
                            subcategory.appendChild(expandedContent);
                        } else {
                            // å¦‚æœå·²å­˜åœ¨ï¼Œæ˜¾ç¤ºå®ƒ
                            expandedContent.style.display = 'block';
                        }
                        
                        showToast(`å·²å±•å¼€${subcategoryTitle}`);
                    }
                });
            });
            
            console.log("æŸ¥çœ‹å…¨éƒ¨æŒ‰é’®åˆå§‹åŒ–å®Œæˆ");
        }
        
        // æ ¹æ®åˆ†ç±»ç”Ÿæˆå¯¹åº”çš„è¡£ç‰©æ•°æ®
        function generateItemsForCategory(categoryTitle) {
            console.log(`ä¸ºåˆ†ç±» "${categoryTitle}" ç”Ÿæˆæ‰©å±•è¡£ç‰©`);
            
            if (categoryTitle.includes('ä¸Šè£…') && categoryTitle.includes('åŸºç¡€æ¬¾')) {
                return [
                    { name: 'ç™½è‰²åŸºç¡€Tæ¤', img: 'https://images.unsplash.com/photo-1576566588028-4147f3842f27?w=387&auto=format&fit=crop' },
                    { name: 'é»‘è‰²ä¼‘é—²å«è¡£', img: 'https://images.unsplash.com/photo-1598033129183-c4f50c736f10?w=387&auto=format&fit=crop' },
                    { name: 'ç°è‰²æ£‰è´¨è¡¬è¡«', img: 'https://images.unsplash.com/photo-1562157873-818bc0726f68?w=387&auto=format&fit=crop' },
                    { name: 'æ¡çº¹é•¿è¢–Tæ¤', img: 'https://images.unsplash.com/photo-1489987707025-afc232f7ea0f?w=387&auto=format&fit=crop' }
                ];
            } else if (categoryTitle.includes('ä¸Šè£…') && categoryTitle.includes('å¤–å¥—')) {
                return [
                    { name: 'æ·±è“è‰²ç‰›ä»”å¤¹å…‹', img: 'https://images.unsplash.com/photo-1591047139829-d91aecb6caea?w=387&auto=format&fit=crop' },
                    { name: 'é»‘è‰²çš®å¤¹å…‹', img: 'https://images.unsplash.com/photo-1548126032-079a0fb0099d?w=387&auto=format&fit=crop' },
                    { name: 'ç°è‰²è¥¿è£…å¤–å¥—', img: 'https://images.unsplash.com/photo-1525450824786-227cbef70703?w=387&auto=format&fit=crop' },
                    { name: 'ç±³è‰²é£è¡£', img: 'https://images.unsplash.com/photo-1551028719-00167b16eac5?w=387&auto=format&fit=crop' }
                ];
            } else if (categoryTitle.includes('ä¸‹è£…') && categoryTitle.includes('è£¤è£…')) {
                return [
                    { name: 'æ·±è“è‰²ç›´ç­’ç‰›ä»”è£¤', img: 'https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=387&auto=format&fit=crop' },
                    { name: 'å¡å…¶è‰²ä¼‘é—²è£¤', img: 'https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?w=387&auto=format&fit=crop' },
                    { name: 'é»‘è‰²è¿åŠ¨è£¤', img: 'https://images.unsplash.com/photo-1473966968600-fa801b869a1a?w=387&auto=format&fit=crop' },
                    { name: 'ç°è‰²è¥¿è£…è£¤', img: 'https://images.unsplash.com/photo-1542272604-787c3835535d?w=387&auto=format&fit=crop' }
                ];
            } else {
                return [
                    { name: 'åŸºç¡€æœé¥°1', img: 'https://images.unsplash.com/photo-1562157873-818bc0726f68?w=387&auto=format&fit=crop' },
                    { name: 'åŸºç¡€æœé¥°2', img: 'https://images.unsplash.com/photo-1576566588028-4147f3842f27?w=387&auto=format&fit=crop' },
                    { name: 'åŸºç¡€æœé¥°3', img: 'https://images.unsplash.com/photo-1598033129183-c4f50c736f10?w=387&auto=format&fit=crop' },
                    { name: 'åŸºç¡€æœé¥°4', img: 'https://images.unsplash.com/photo-1525450824786-227cbef70703?w=387&auto=format&fit=crop' }
                ];
            }
        }
        
        // åˆå§‹åŒ–è¡£ç‰©æ‚¬åœæ•ˆæœ
        function initClothesItemHover() {
            // ä¸ºæ‰€æœ‰è¡£ç‰©é¡¹æ·»åŠ æ‚¬åœæ•ˆæœ
            document.querySelectorAll('.clothes-item').forEach(item => {
                item.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                    this.style.boxShadow = '0 3px 8px rgba(0,0,0,0.1)';
                });
                
                item.addEventListener('mouseleave', function() {
                    this.style.transform = '';
                    this.style.boxShadow = '';
                });
            });
        }

        // è¿”å›é¡¶éƒ¨åŠŸèƒ½
        function initBackToTop() {
            const backToTopBtn = document.getElementById('back-to-top');
            const container = document.querySelector('.responsive-container');
            
            // ç›‘å¬æ»šåŠ¨äº‹ä»¶
            container.addEventListener('scroll', function() {
                if (container.scrollTop > 300) {
                    backToTopBtn.classList.add('visible');
                } else {
                    backToTopBtn.classList.remove('visible');
                }
            });
            
            // ç‚¹å‡»è¿”å›é¡¶éƒ¨
            backToTopBtn.addEventListener('click', function() {
                container.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }

        // åˆå§‹åŒ–è¡£ç‰©ç‚¹å‡»äº‹ä»¶
        function initClothesItemClick() {
            const items = document.querySelectorAll('.clothes-item');
            
            items.forEach(item => {
                item.addEventListener('click', function(e) {
                    // æ£€æŸ¥æ˜¯å¦åœ¨å¤šé€‰æ¨¡å¼
                    if (isMultiSelectMode) {
                        // å¦‚æœæ˜¯å¤šé€‰æ¨¡å¼ï¼Œåˆ‡æ¢é€‰ä¸­çŠ¶æ€
                        toggleItemSelection(this);
                        e.preventDefault();
                        e.stopPropagation();
                        return;
                    }
                    
                    // å¦‚æœæ˜¯é•¿æŒ‰æ¨¡å¼æˆ–ç‚¹å‡»æ“ä½œï¼Œæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
                    const name = this.querySelector('.item-name')?.textContent || 'æœªå‘½åè¡£ç‰©';
                    showToast(`æŸ¥çœ‹è¡£ç‰©: ${name}`);
                    
                    // æ¨¡æ‹Ÿè¡£ç‰©è¯¦æƒ…é¡µ
                    /*
                    window.location.href = `item-detail.html?id=${this.getAttribute('data-id')}`;
                    */
                });
                
                // æ·»åŠ é•¿æŒ‰è¯†åˆ«
                let longPressTimer;
                item.addEventListener('touchstart', function(e) {
                    longPressTimer = setTimeout(() => {
                        // é•¿æŒ‰å¼€å¯å¤šé€‰æ¨¡å¼
                        enterMultiSelectMode();
                        toggleItemSelection(this);
                        // æ·»åŠ è§¦æ„Ÿåé¦ˆ
                        if (window.navigator && window.navigator.vibrate) {
                            window.navigator.vibrate(50);
                        }
                    }, 500); // 500msé•¿æŒ‰
                });
                
                item.addEventListener('touchend', function() {
                    clearTimeout(longPressTimer);
                });
                
                item.addEventListener('touchmove', function() {
                    clearTimeout(longPressTimer);
                });
            });
        }
        
        // æ‹–æ”¾ç›¸å…³å˜é‡
        let draggedItem = null;
        let dragPreview = null;
        let isMultiSelectMode = false;
        let selectedItems = new Set();
        let dragStartX = 0;
        let dragStartY = 0;
        
        // åˆå§‹åŒ–æ•´ç†æ åŠŸèƒ½
        function initOrganizerBar() {
            const organizerContainer = document.getElementById('organizerContainer');
            const organizerHandle = document.getElementById('organizerHandle');
            const organizerMinimizeBtn = document.getElementById('organizerMinimize');
            const organizerClearBtn = document.getElementById('organizerClear');
            const organizerIndicator = document.getElementById('organizerIndicator');
            
            // è®¾ç½®æ•´ç†æ å±•å¼€/æ”¶èµ·åŠŸèƒ½
            organizerHandle.addEventListener('click', function() {
                toggleOrganizerBar();
            });
            
            organizerMinimizeBtn.addEventListener('click', function() {
                hideOrganizerBar();
            });
            
            // è®¾ç½®æ•´ç†æ æŒ‡ç¤ºå™¨ç‚¹å‡»åŠŸèƒ½
            organizerIndicator.addEventListener('click', function() {
                showOrganizerBar();
            });
            
            // è®¾ç½®æ¸…ç©ºæŒ‰é’®åŠŸèƒ½
            organizerClearBtn.addEventListener('click', function() {
                if (getOrganizerItemsCount() > 0) {
                    showConfirmDialog(
                        'æ¸…ç©ºæ•´ç†æ ', 
                        'ç¡®å®šè¦æ¸…ç©ºæ•´ç†æ ä¸­çš„æ‰€æœ‰è¡£ç‰©å—ï¼Ÿ', 
                        clearOrganizerItems
                    );
                } else {
                    showToast('æ•´ç†æ å·²ç»æ˜¯ç©ºçš„');
                }
            });
            
            // ä»æœ¬åœ°å­˜å‚¨ä¸­æ¢å¤æ•´ç†æ çŠ¶æ€
            restoreOrganizerState();
        }
        
        // åˆå§‹åŒ–æ‹–æ”¾åŠŸèƒ½
        function initDragAndDrop() {
            // åˆ›å»ºæ‹–æ‹½é¢„è§ˆå…ƒç´ 
            createDragPreview();
            
            // ä¸ºæ‰€æœ‰è¡£ç‰©æ·»åŠ æ‹–æ‹½åŠŸèƒ½
            makeItemsDraggable();
            
            // è®¾ç½®æ•´ç†æ ä¸ºæ¥æ”¶åŒºåŸŸ
            setupDropZone();
        }
        
        // åˆ›å»ºæ‹–æ‹½é¢„è§ˆå…ƒç´ 
        function createDragPreview() {
            if (!document.getElementById('dragPreview')) {
                dragPreview = document.createElement('div');
                dragPreview.id = 'dragPreview';
                dragPreview.className = 'drag-preview';
                dragPreview.style.display = 'none';
                document.body.appendChild(dragPreview);
            } else {
                dragPreview = document.getElementById('dragPreview');
            }
        }
        
        // ä¸ºæ‰€æœ‰è¡£ç‰©æ·»åŠ æ‹–æ‹½åŠŸèƒ½
        function makeItemsDraggable() {
            const items = document.querySelectorAll('.clothes-item');
            
            items.forEach(item => {
                item.classList.add('draggable');
                
                // æ·»åŠ æ‹–æ‹½äº‹ä»¶ç›‘å¬å™¨ (è§¦æ‘¸è®¾å¤‡)
                item.addEventListener('touchstart', handleDragStart);
                
                // æ·»åŠ æ‹–æ‹½äº‹ä»¶ç›‘å¬å™¨ (é¼ æ ‡)
                item.addEventListener('mousedown', handleDragStart);
            });
            
            // ä¸ºæ–‡æ¡£æ·»åŠ ç§»åŠ¨å’Œç»“æŸæ‹–æ‹½äº‹ä»¶
            document.addEventListener('mousemove', handleDragMove);
            document.addEventListener('touchmove', handleDragMove, { passive: false });
            document.addEventListener('mouseup', handleDragEnd);
            document.addEventListener('touchend', handleDragEnd);
        }
        
        // å¤„ç†æ‹–æ‹½å¼€å§‹
        function handleDragStart(e) {
            // æ£€æŸ¥æ˜¯å¦æ˜¯å¤šé€‰æ¨¡å¼ï¼Œå¦‚æœæ˜¯åˆ™ä¸å¯åŠ¨æ‹–æ‹½
            if (isMultiSelectMode) return;
            
            // è·å–åˆå§‹æ‹–æ‹½ä½ç½®
            if (e.type === 'mousedown') {
                dragStartX = e.clientX;
                dragStartY = e.clientY;
            } else if (e.type === 'touchstart') {
                dragStartX = e.touches[0].clientX;
                dragStartY = e.touches[0].clientY;
            }
            
            // è®¾ç½®å»¶æ—¶ï¼Œé˜²æ­¢æ„å¤–æ‹–æ‹½
            setTimeout(() => {
                if (!isMultiSelectMode) {
                    draggedItem = this;
                    this.classList.add('dragging');
                    
                    // æ›´æ–°æ‹–æ‹½é¢„è§ˆ
                    const img = this.querySelector('img');
                    if (img) {
                        dragPreview.innerHTML = `<img src="${img.src}" alt="é¢„è§ˆ">`;
                        
                        // è®¾ç½®é¢„è§ˆä½ç½®
                        if (e.type === 'mousedown') {
                            dragPreview.style.left = `${e.clientX}px`;
                            dragPreview.style.top = `${e.clientY}px`;
                        } else if (e.type === 'touchstart') {
                            dragPreview.style.left = `${e.touches[0].clientX}px`;
                            dragPreview.style.top = `${e.touches[0].clientY}px`;
                        }
                        
                        dragPreview.style.display = 'block';
                    }
                    
                    // æ˜¾ç¤ºæ‹–æ‹½æç¤º
                    showDropZoneHint();
                }
            }, 100);
            
            // é˜²æ­¢é»˜è®¤è¡Œä¸ºï¼ˆä¾‹å¦‚æ–‡æœ¬é€‰æ‹©ï¼‰
            e.preventDefault();
        }
        
        // å¤„ç†æ‹–æ‹½ç§»åŠ¨
        function handleDragMove(e) {
            if (!draggedItem) return;
            
            // è·å–å½“å‰ä½ç½®
            let clientX, clientY;
            if (e.type === 'mousemove') {
                clientX = e.clientX;
                clientY = e.clientY;
            } else if (e.type === 'touchmove') {
                clientX = e.touches[0].clientX;
                clientY = e.touches[0].clientY;
                
                // é˜²æ­¢é¡µé¢æ»šåŠ¨
                e.preventDefault();
            }
            
            // ç§»åŠ¨é¢„è§ˆå…ƒç´ 
            dragPreview.style.left = `${clientX}px`;
            dragPreview.style.top = `${clientY}px`;
            
            // æ£€æŸ¥æ˜¯å¦åœ¨æ•´ç†æ ä¸Šæ–¹
            checkIfOverDropZone(clientX, clientY);
        }
        
        // æ£€æŸ¥æ˜¯å¦åœ¨æ”¾ç½®åŒºåŸŸä¸Šæ–¹
        function checkIfOverDropZone(x, y) {
            const dropZone = document.getElementById('organizerContainer');
            const rect = dropZone.getBoundingClientRect();
            
            if (x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom) {
                if (!dropZone.classList.contains('hover')) {
                    dropZone.classList.add('hover');
                    // å¦‚æœæ•´ç†æ æ˜¯éšè—çš„ï¼Œæ˜¾ç¤ºå®ƒ
                    if (!dropZone.classList.contains('show')) {
                        showOrganizerBar(true); // ä¼ å…¥trueè¡¨ç¤ºä¸´æ—¶æ˜¾ç¤º
                    }
                }
            } else {
                dropZone.classList.remove('hover');
            }
        }
        
        // å¤„ç†æ‹–æ‹½ç»“æŸ
        function handleDragEnd(e) {
            if (!draggedItem) return;
            
            // è·å–æœ€ç»ˆä½ç½®
            let clientX, clientY;
            if (e.type === 'mouseup') {
                clientX = e.clientX;
                clientY = e.clientY;
            } else if (e.type === 'touchend') {
                // touchendäº‹ä»¶ä¸åŒ…å«åæ ‡ï¼Œä½¿ç”¨æœ€åå·²çŸ¥ä½ç½®
                clientX = parseInt(dragPreview.style.left);
                clientY = parseInt(dragPreview.style.top);
            }
            
            // æ£€æŸ¥æ˜¯å¦åœ¨æ•´ç†æ ä¸Šæ–¹
            const dropZone = document.getElementById('organizerContainer');
            const rect = dropZone.getBoundingClientRect();
            
            if (clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom) {
                // æ·»åŠ åˆ°æ•´ç†æ 
                addToOrganizerBar(draggedItem);
                showToast('å·²æ·»åŠ åˆ°æ•´ç†æ ');
            }
            
            // æ¢å¤æ ·å¼
            draggedItem.classList.remove('dragging');
            draggedItem = null;
            dragPreview.style.display = 'none';
            dropZone.classList.remove('hover');
            
            // éšè—æ‹–æ‹½æç¤º
            hideDropZoneHint();
        }
        
        // è®¾ç½®æ”¾ç½®åŒºåŸŸ
        function setupDropZone() {
            const dropZone = document.getElementById('organizerItems');
            
            // æ·»åŠ æ”¾ç½®äº‹ä»¶ç›‘å¬å™¨
            dropZone.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('drag-over');
            });
            
            dropZone.addEventListener('dragleave', function() {
                this.classList.remove('drag-over');
            });
            
            dropZone.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('drag-over');
                
                if (draggedItem) {
                    addToOrganizerBar(draggedItem);
                }
            });
        }
        
        // æ·»åŠ åˆ°æ•´ç†æ 
        function addToOrganizerBar(item) {
            // è·å–æ•´ç†æ å®¹å™¨
            const organizerItems = document.getElementById('organizerItems');
            const placeholder = document.getElementById('organizerPlaceholder');
            
            // ç§»é™¤å ä½ç¬¦
            if (placeholder && getOrganizerItemsCount() === 0) {
                placeholder.style.display = 'none';
            }
            
            // æ£€æŸ¥æ˜¯å¦å·²ç»åœ¨æ•´ç†æ ä¸­
            const itemId = item.getAttribute('data-id') || generateItemId(item);
            if (document.querySelector(`.organizer-item[data-item-id="${itemId}"]`)) {
                showToast('è¯¥è¡£ç‰©å·²åœ¨æ•´ç†æ ä¸­');
                return;
            }
            
            // åˆ›å»ºæ•´ç†æ é¡¹
            const organizerItem = document.createElement('div');
            organizerItem.className = 'organizer-item';
            organizerItem.setAttribute('data-item-id', itemId);
            
            // å¤åˆ¶å›¾ç‰‡
            const img = item.querySelector('img');
            if (img) {
                organizerItem.innerHTML = `
                    <img src="${img.src}" alt="æ•´ç†æ è¡£ç‰©" class="organizer-item-img">
                    <div class="organizer-item-remove">Ã—</div>
                `;
            } else {
                organizerItem.innerHTML = `
                    <div class="organizer-item-img" style="background-color: #ddd;"></div>
                    <div class="organizer-item-remove">Ã—</div>
                `;
            }
            
            // æ·»åŠ ç§»é™¤æŒ‰é’®åŠŸèƒ½
            const removeBtn = organizerItem.querySelector('.organizer-item-remove');
            removeBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                removeFromOrganizerBar(organizerItem);
            });
            
            // å°†é¡¹æ·»åŠ åˆ°æ•´ç†æ 
            organizerItems.appendChild(organizerItem);
            
            // æ›´æ–°è®¡æ•°
            updateOrganizerCount();
            
            // ä¿å­˜æ•´ç†æ çŠ¶æ€
            saveOrganizerState();
            
            // æ˜¾ç¤ºæ•´ç†æ ï¼ˆå¦‚æœå®ƒæ˜¯éšè—çš„ï¼‰
            showOrganizerBar();
        }
        
        // ä»æ•´ç†æ ç§»é™¤
        function removeFromOrganizerBar(item) {
            item.remove();
            
            // æ›´æ–°è®¡æ•°
            updateOrganizerCount();
            
            // å¦‚æœæ•´ç†æ ä¸ºç©ºï¼Œæ¢å¤å ä½ç¬¦
            if (getOrganizerItemsCount() === 0) {
                const placeholder = document.getElementById('organizerPlaceholder');
                if (placeholder) {
                    placeholder.style.display = 'flex';
                }
            }
            
            // ä¿å­˜æ•´ç†æ çŠ¶æ€
            saveOrganizerState();
        }
        
        // æ¸…ç©ºæ•´ç†æ 
        function clearOrganizerItems() {
            const organizerItems = document.getElementById('organizerItems');
            const placeholder = document.getElementById('organizerPlaceholder');
            
            // åˆ é™¤æ‰€æœ‰æ•´ç†æ é¡¹ï¼ˆé™¤äº†å ä½ç¬¦ï¼‰
            const items = organizerItems.querySelectorAll('.organizer-item');
            items.forEach(item => item.remove());
            
            // æ¢å¤å ä½ç¬¦
            if (placeholder) {
                placeholder.style.display = 'flex';
            }
            
            // æ›´æ–°è®¡æ•°
            updateOrganizerCount();
            
            // æ¸…é™¤é€‰ä¸­çŠ¶æ€
            clearSelections();
            
            // ä¿å­˜æ•´ç†æ çŠ¶æ€
            saveOrganizerState();
            
            showToast('æ•´ç†æ å·²æ¸…ç©º');
        }
        
        // æ›´æ–°æ•´ç†æ è®¡æ•°
        function updateOrganizerCount() {
            const count = getOrganizerItemsCount();
            const countEl = document.getElementById('organizerCount');
            const indicatorCountEl = document.getElementById('indicatorCount');
            const indicator = document.getElementById('organizerIndicator');
            
            if (countEl) countEl.textContent = count;
            if (indicatorCountEl) indicatorCountEl.textContent = count;
            
            // æ›´æ–°æŒ‡ç¤ºå™¨å¯è§æ€§
            if (indicator) {
                if (count > 0) {
                    indicator.classList.add('show');
                } else {
                    indicator.classList.remove('show');
                }
            }
        }
        
        // è·å–æ•´ç†æ ä¸­çš„é¡¹ç›®æ•°é‡
        function getOrganizerItemsCount() {
            return document.querySelectorAll('.organizer-item').length;
        }
        
        // æ˜¾ç¤ºæ•´ç†æ 
        function showOrganizerBar(temporary = false) {
            const organizerContainer = document.getElementById('organizerContainer');
            organizerContainer.classList.add('show');
            
            if (!temporary) {
                // å­˜å‚¨æ•´ç†æ çŠ¶æ€
                localStorage.setItem('organizerBarVisible', 'true');
            }
        }
        
        // éšè—æ•´ç†æ 
        function hideOrganizerBar() {
            const organizerContainer = document.getElementById('organizerContainer');
            organizerContainer.classList.remove('show');
            
            // å­˜å‚¨æ•´ç†æ çŠ¶æ€
            localStorage.setItem('organizerBarVisible', 'false');
            
            // æ˜¾ç¤ºæŒ‡ç¤ºå™¨
            updateOrganizerCount();
        }
        
        // åˆ‡æ¢æ•´ç†æ å¯è§æ€§
        function toggleOrganizerBar() {
            const organizerContainer = document.getElementById('organizerContainer');
            if (organizerContainer.classList.contains('show')) {
                hideOrganizerBar();
            } else {
                showOrganizerBar();
            }
        }
        
        // ä¿å­˜æ•´ç†æ çŠ¶æ€
        function saveOrganizerState() {
            const organizerItems = document.querySelectorAll('.organizer-item');
            const itemsData = [];
            
            organizerItems.forEach(item => {
                const imgSrc = item.querySelector('img')?.src || '';
                const itemId = item.getAttribute('data-item-id') || '';
                
                itemsData.push({
                    id: itemId,
                    imgSrc: imgSrc
                });
            });
            
            localStorage.setItem('organizerItems', JSON.stringify(itemsData));
        }
        
        // æ¢å¤æ•´ç†æ çŠ¶æ€
        function restoreOrganizerState() {
            // æ¢å¤æ•´ç†æ å¯è§æ€§
            const isVisible = localStorage.getItem('organizerBarVisible') === 'true';
            if (isVisible) {
                showOrganizerBar();
            }
            
            // æ¢å¤æ•´ç†æ ä¸­çš„é¡¹ç›®
            const savedItems = localStorage.getItem('organizerItems');
            if (savedItems) {
                try {
                    const itemsData = JSON.parse(savedItems);
                    const organizerItems = document.getElementById('organizerItems');
                    const placeholder = document.getElementById('organizerPlaceholder');
                    
                    if (itemsData.length > 0 && placeholder) {
                        placeholder.style.display = 'none';
                    }
                    
                    itemsData.forEach(itemData => {
                        if (itemData.imgSrc) {
                            const organizerItem = document.createElement('div');
                            organizerItem.className = 'organizer-item';
                            organizerItem.setAttribute('data-item-id', itemData.id);
                            
                            organizerItem.innerHTML = `
                                <img src="${itemData.imgSrc}" alt="æ•´ç†æ è¡£ç‰©" class="organizer-item-img">
                                <div class="organizer-item-remove">Ã—</div>
                            `;
                            
                            // æ·»åŠ ç§»é™¤æŒ‰é’®åŠŸèƒ½
                            const removeBtn = organizerItem.querySelector('.organizer-item-remove');
                            removeBtn.addEventListener('click', function(e) {
                                e.stopPropagation();
                                removeFromOrganizerBar(organizerItem);
                            });
                            
                            // å°†é¡¹æ·»åŠ åˆ°æ•´ç†æ 
                            organizerItems.appendChild(organizerItem);
                        }
                    });
                    
                    // æ›´æ–°è®¡æ•°
                    updateOrganizerCount();
                } catch (error) {
                    console.error('æ¢å¤æ•´ç†æ çŠ¶æ€å¤±è´¥:', error);
                }
            }
        }
        
        // ç”Ÿæˆå”¯ä¸€çš„é¡¹ç›®ID
        function generateItemId(item) {
            const id = 'item_' + Math.random().toString(36).substr(2, 9);
            item.setAttribute('data-id', id);
            return id;
        }
        
        // æ˜¾ç¤ºæ‹–æ‹½æç¤º
        function showDropZoneHint() {
            const hint = document.getElementById('dropZoneHint');
            if (hint) {
                hint.classList.add('show');
            }
        }
        
        // éšè—æ‹–æ‹½æç¤º
        function hideDropZoneHint() {
            const hint = document.getElementById('dropZoneHint');
            if (hint) {
                hint.classList.remove('show');
            }
        }
        
        // åˆå§‹åŒ–æ‰¹é‡æ“ä½œåŠŸèƒ½
        function initBatchActions() {
            // åˆ›å»ºç©¿æ­
            document.getElementById('batchOutfit').addEventListener('click', function() {
                if (getOrganizerItemsCount() < 2) {
                    showToast('è‡³å°‘éœ€è¦2ä»¶è¡£ç‰©æ‰èƒ½åˆ›å»ºç©¿æ­');
                    return;
                }
                
                showToast('åˆ›å»ºç©¿æ­åŠŸèƒ½å°šæœªå®ç°');
                // å®é™…å®ç°ä¸­åº”å¯¼èˆªåˆ°åˆ›å»ºç©¿æ­é¡µé¢ï¼Œå¹¶ä¼ å…¥é€‰æ‹©çš„è¡£ç‰©
            });
            
            // ç§»åŠ¨åˆ†ç±»
            document.getElementById('batchMove').addEventListener('click', function() {
                if (getOrganizerItemsCount() === 0) {
                    showToast('è¯·å…ˆé€‰æ‹©éœ€è¦ç§»åŠ¨çš„è¡£ç‰©');
                    return;
                }
                
                showToast('ç§»åŠ¨åˆ†ç±»åŠŸèƒ½å°šæœªå®ç°');
                // å®é™…å®ç°ä¸­åº”æ˜¾ç¤ºåˆ†ç±»é€‰æ‹©å¯¹è¯æ¡†
            });
            
            // éšè—æ¨è
            document.getElementById('batchHide').addEventListener('click', function() {
                if (getOrganizerItemsCount() === 0) {
                    showToast('è¯·å…ˆé€‰æ‹©éœ€è¦éšè—çš„è¡£ç‰©');
                    return;
                }
                
                showConfirmDialog(
                    'éšè—è¡£ç‰©', 
                    `ç¡®å®šè¦å°†é€‰ä¸­çš„${getOrganizerItemsCount()}ä»¶è¡£ç‰©ä»AIæ¨èä¸­éšè—å—ï¼Ÿ`, 
                    function() {
                        showToast(`å·²å°†${getOrganizerItemsCount()}ä»¶è¡£ç‰©ä»æ¨èä¸­éšè—`);
                        clearOrganizerItems();
                    }
                );
            });
            
            // åˆ é™¤
            document.getElementById('batchDelete').addEventListener('click', function() {
                if (getOrganizerItemsCount() === 0) {
                    showToast('è¯·å…ˆé€‰æ‹©éœ€è¦åˆ é™¤çš„è¡£ç‰©');
                    return;
                }
                
                showConfirmDialog(
                    'åˆ é™¤è¡£ç‰©', 
                    `ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„${getOrganizerItemsCount()}ä»¶è¡£ç‰©å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`, 
                    function() {
                        showToast(`å·²åˆ é™¤${getOrganizerItemsCount()}ä»¶è¡£ç‰©`);
                        clearOrganizerItems();
                    }
                );
            });
        }
        
        // åˆå§‹åŒ–ç¡®è®¤å¯¹è¯æ¡†
        function initConfirmDialog() {
            const dialog = document.getElementById('confirmDialog');
            const backdrop = document.getElementById('confirmBackdrop');
            const cancelBtn = document.getElementById('confirmCancel');
            const okBtn = document.getElementById('confirmOk');
            
            // è®¾ç½®å–æ¶ˆæŒ‰é’®
            cancelBtn.addEventListener('click', function() {
                hideConfirmDialog();
            });
            
            // è®¾ç½®èƒŒæ™¯ç‚¹å‡»å…³é—­
            backdrop.addEventListener('click', function() {
                hideConfirmDialog();
            });
        }
        
        // æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
        function showConfirmDialog(title, message, confirmCallback) {
            const dialog = document.getElementById('confirmDialog');
            const backdrop = document.getElementById('confirmBackdrop');
            const titleEl = document.getElementById('confirmTitle');
            const messageEl = document.getElementById('confirmMessage');
            const okBtn = document.getElementById('confirmOk');
            
            // è®¾ç½®å¯¹è¯æ¡†å†…å®¹
            titleEl.textContent = title;
            messageEl.textContent = message;
            
            // è®¾ç½®ç¡®è®¤æŒ‰é’®
            okBtn.onclick = function() {
                hideConfirmDialog();
                if (typeof confirmCallback === 'function') {
                    confirmCallback();
                }
            };
            
            // æ˜¾ç¤ºå¯¹è¯æ¡†
            dialog.classList.add('show');
            backdrop.classList.add('show');
        }
        
        // éšè—ç¡®è®¤å¯¹è¯æ¡†
        function hideConfirmDialog() {
            const dialog = document.getElementById('confirmDialog');
            const backdrop = document.getElementById('confirmBackdrop');
            
            dialog.classList.remove('show');
            backdrop.classList.remove('show');
        }
        
        // è¿›å…¥å¤šé€‰æ¨¡å¼
        function enterMultiSelectMode() {
            isMultiSelectMode = true;
            
            // æ˜¾ç¤ºå¤šé€‰æ¨¡å¼æç¤º
            const indicator = document.getElementById('selectionModeIndicator');
            indicator.classList.add('show');
            
            // æ·»åŠ é€€å‡ºå¤šé€‰æ¨¡å¼çš„æŒ‰é’®
            if (!document.getElementById('exitSelectionMode')) {
                const exitButton = document.createElement('button');
                exitButton.id = 'exitSelectionMode';
                exitButton.className = 'exit-selection-mode';
                exitButton.textContent = 'å®Œæˆ';
                exitButton.style.position = 'fixed';
                exitButton.style.top = '60px';
                exitButton.style.right = '20px';
                exitButton.style.padding = '5px 15px';
                exitButton.style.backgroundColor = '#3a7bd5';
                exitButton.style.color = 'white';
                exitButton.style.border = 'none';
                exitButton.style.borderRadius = '20px';
                exitButton.style.fontSize = '14px';
                exitButton.style.zIndex = '200';
                
                exitButton.addEventListener('click', function() {
                    exitMultiSelectMode();
                });
                
                document.body.appendChild(exitButton);
            }
            
            // æ·»åŠ iOSé£æ ¼è§¦æ„Ÿåé¦ˆ
            if (window.navigator && window.navigator.vibrate) {
                window.navigator.vibrate(10);
            }
        }
        
        // é€€å‡ºå¤šé€‰æ¨¡å¼
        function exitMultiSelectMode() {
            isMultiSelectMode = false;
            
            // éšè—å¤šé€‰æ¨¡å¼æç¤º
            const indicator = document.getElementById('selectionModeIndicator');
            indicator.classList.remove('show');
            
            // ç§»é™¤é€€å‡ºæŒ‰é’®
            const exitButton = document.getElementById('exitSelectionMode');
            if (exitButton) {
                exitButton.remove();
            }
            
            // å¦‚æœæœ‰é€‰ä¸­çš„é¡¹ç›®ï¼Œæ·»åŠ åˆ°æ•´ç†æ 
            if (selectedItems.size > 0) {
                addSelectedItemsToOrganizer();
            }
            
            // æ¸…é™¤é€‰ä¸­çŠ¶æ€
            clearSelections();
        }
        
        // åˆ‡æ¢é€‰ä¸­çŠ¶æ€
        function toggleItemSelection(item) {
            const itemId = item.getAttribute('data-id') || generateItemId(item);
            
            if (item.classList.contains('selected')) {
                // å–æ¶ˆé€‰ä¸­
                item.classList.remove('selected');
                selectedItems.delete(itemId);
            } else {
                // é€‰ä¸­
                item.classList.add('selected');
                selectedItems.add(itemId);
                
                // æ·»åŠ è§¦æ„Ÿåé¦ˆ
                if (window.navigator && window.navigator.vibrate) {
                    window.navigator.vibrate(5);
                }
            }
            
            // æ›´æ–°é€‰ä¸­è®¡æ•°
            updateSelectedCount();
        }
        
        // æ›´æ–°é€‰ä¸­è®¡æ•°
        function updateSelectedCount() {
            const indicator = document.getElementById('selectionModeIndicator');
            if (indicator) {
                indicator.querySelector('span').textContent = 
                    `å¤šé€‰æ¨¡å¼å·²å¼€å¯ï¼Œå·²é€‰æ‹© ${selectedItems.size} ä»¶è¡£ç‰©`;
            }
        }
        
        // æ¸…é™¤æ‰€æœ‰é€‰ä¸­
        function clearSelections() {
            document.querySelectorAll('.clothes-item.selected').forEach(item => {
                item.classList.remove('selected');
            });
            selectedItems.clear();
            updateSelectedCount();
        }
        
        // æ·»åŠ é€‰ä¸­çš„é¡¹ç›®åˆ°æ•´ç†æ 
        function addSelectedItemsToOrganizer() {
            let addedCount = 0;
            
            document.querySelectorAll('.clothes-item.selected').forEach(item => {
                // è·å–æ•´ç†æ å®¹å™¨
                const organizerItems = document.getElementById('organizerItems');
                const placeholder = document.getElementById('organizerPlaceholder');
                
                // ç§»é™¤å ä½ç¬¦
                if (placeholder && getOrganizerItemsCount() === 0) {
                    placeholder.style.display = 'none';
                }
                
                // æ£€æŸ¥æ˜¯å¦å·²ç»åœ¨æ•´ç†æ ä¸­
                const itemId = item.getAttribute('data-id');
                if (document.querySelector(`.organizer-item[data-item-id="${itemId}"]`)) {
                    return; // è·³è¿‡å·²åœ¨æ•´ç†æ çš„é¡¹ç›®
                }
                
                // åˆ›å»ºæ•´ç†æ é¡¹
                const organizerItem = document.createElement('div');
                organizerItem.className = 'organizer-item';
                organizerItem.setAttribute('data-item-id', itemId);
                
                // å¤åˆ¶å›¾ç‰‡
                const img = item.querySelector('img');
                if (img) {
                    organizerItem.innerHTML = `
                        <img src="${img.src}" alt="æ•´ç†æ è¡£ç‰©" class="organizer-item-img">
                        <div class="organizer-item-remove">Ã—</div>
                    `;
                } else {
                    organizerItem.innerHTML = `
                        <div class="organizer-item-img" style="background-color: #ddd;"></div>
                        <div class="organizer-item-remove">Ã—</div>
                    `;
                }
                
                // æ·»åŠ ç§»é™¤æŒ‰é’®åŠŸèƒ½
                const removeBtn = organizerItem.querySelector('.organizer-item-remove');
                removeBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    removeFromOrganizerBar(organizerItem);
                });
                
                // å°†é¡¹æ·»åŠ åˆ°æ•´ç†æ 
                organizerItems.appendChild(organizerItem);
                addedCount++;
            });
            
            if (addedCount > 0) {
                // æ›´æ–°è®¡æ•°
                updateOrganizerCount();
                
                // ä¿å­˜æ•´ç†æ çŠ¶æ€
                saveOrganizerState();
                
                // æ˜¾ç¤ºæ•´ç†æ 
                showOrganizerBar();
                
                // æ˜¾ç¤ºæç¤º
                showToast(`å·²æ·»åŠ ${addedCount}ä»¶è¡£ç‰©åˆ°æ•´ç†æ `);
            }
        }

        // åˆå§‹åŒ–å¼•å¯¼
        function initGuide() {
            const hasSeenGuide = localStorage.getItem('hasSeenOrganizerGuide') === 'true';
            
            if (!hasSeenGuide) {
                // æ˜¾ç¤ºå¼•å¯¼
                showGuide();
                
                // æ ‡è®°ä¸ºå·²ç»çœ‹è¿‡å¼•å¯¼
                localStorage.setItem('hasSeenOrganizerGuide', 'true');
            }
            
            // å¼•å¯¼å…³é—­æŒ‰é’®
            document.getElementById('guideCloseButton').addEventListener('click', function() {
                hideGuide();
                // å¼•å¯¼å…³é—­åæ˜¾ç¤ºæ•´ç†æ 
                showOrganizerBar();
            });
        }
        
        // æ˜¾ç¤ºå¼•å¯¼
        function showGuide() {
            const guide = document.getElementById('organizerGuide');
            if (guide) {
                guide.classList.add('show');
            }
        }
        
        // éšè—å¼•å¯¼
        function hideGuide() {
            const guide = document.getElementById('organizerGuide');
            if (guide) {
                guide.classList.remove('show');
            }
        }
    </script>
</body>
</html> 